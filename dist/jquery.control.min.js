!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).$=e(t.$)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t);const i={};let r=!1;const o=/xyz/.test(function(){return"xyz"}.toString())?/\b_super\b/:/.*/,s=function(t,e,n){return function(){var i,r=this._super;return this._super=t[e],i=n.apply(this,arguments),this._super=r,i}},c=function(){};c.prototype._super=function(){},c.prototype.instance=function(t){return new this.constructor(t)},c.prototype.proxy=function(t){return t="string"==typeof t?this[t]:t,e=this,n=t,function(){return n.apply(e,[this].concat([].slice.call(arguments)))};var e,n},c.extend=function t(e,n){function i(){!r&&this.init&&this.init.apply(this,arguments)}return i.prototype=function(t,e){var n,i,c=t.prototype;for(n in r=!0,i=new t,r=!1,e)e.hasOwnProperty(n)&&("function"==typeof c[n]&&"function"==typeof e[n]&&o.test(e[n])?i[n]=s(c,n,e[n]):i[n]=e[n]);return i}(this,e),i.prototype.name=n,i.prototype.constructor=i,i.extend=t,i},c.createClass=function(t,e,n){return i[t]||(i[t]=(n?i[e]:c).extend(n||e,t)),i[t]},c.getClass=function(t,e){return"function"!=typeof i[t]?null:new i[t](e)};var u=c;var a=function(t,e,n){let i={},r={true:!0,false:!1,null:null};return n&&(t=t.replace(/\+/g," ")),t.split("&").forEach((function(t){let n,o=t.split("="),s=decodeURIComponent(o[0]),c=i,u=0,a=s.split("]["),l=a.length-1;if(/\[/.test(a[0])&&/]$/.test(a[l])?(a[l]=a[l].replace(/]$/,""),a=a.shift().split("[").concat(a),l=a.length-1):l=0,2===o.length)if(n=decodeURIComponent(o[1]),e&&(n=n&&!isNaN(n)&&+n+""===n?+n:"undefined"===n?void 0:void 0!==r[n]?r[n]:n),l)for(;u<=l;u++)s=""===a[u]?c.length:a[u],c=c[s]=u<l?c[s]||(a[u+1]&&isNaN(a[u+1])?{}:[]):n;else"[object Array]"===Object.prototype.toString.call(i[s])?i[s].push(n):!{}.hasOwnProperty.call(i,s)?i[s]=n:i[s]=[i[s],n];else s&&(i[s]=e?void 0:"")})),i};const l=n.default,h=a;let f=!1;const p={prefix:"#",type:"hash",event:"hashchange.location",callbacks:[],initialize:!1,url:function(t,e){return location[!0===e?"replace":"assign"](t),this},normalize:function(t){let e=this.prefix;return(0===t.indexOf("http")||0===t.indexOf("#"))&&(e=""),[e,t].join("")},assign:function(t,e){return f=e,this.url(this.normalize(t))},replace:function(t,e){return f=e,this.url(this.normalize(t),!0)},href:function(){return location[this.type].slice(1)},part:function(t){return this.href().split("#")[0].split("?")[t]||""},query:function(t,e,n){if(!arguments.length)return h(this.part(1));t=t?[this.part(0),l.param(t)].join("?"):this.part(0),this[e?"replace":"assign"](t,n)},path:function(t,e,n){if(!arguments.length)return this.part(0);t=this.part(1)?[t,this.part(1)].join("?"):t||"/",this[e?"replace":"assign"](t,n)},json:function(t,e,n){let i=this.href().split("#")[0].split("?")[1]||"{}";if(!arguments.length){try{i=decodeURIComponent(i),i=JSON.parse(i)}catch(t){i={}}return i}t=t?[this.part(0),JSON.stringify(t)].join("?"):this.part(0),this[e?"replace":"assign"](t,n)},proxy:function(t){return e=this,function(){return e[t].apply(e,arguments)};var e},bind:function(t){this.callbacks.push(t),!1===this.initialize&&(this.initialize=!0,l(window).on(this.event,this.proxy("change")))},unbind:function(t){this.callbacks.splice(this.callbacks.indexOf(t),1)},host:function(){return location.host},indexOf:function(t,e){return this.href().indexOf(t)===e},change:function(){let t;if(!0===f)return f=!1;if(this.callbacks.length)for(t in this.callbacks)this.callbacks.hasOwnProperty(t)&&this.callbacks[t].call(this)}};var d=p,_={};const y=n.default,g=function(t){return Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})},m=function(t){return JSON.stringify(t.slice().sort())};_.arrayStringify=g,_.compareArrays=function(t,e){return m(t)===m(e)},_.sortObject=g,_.isPlainObject=function(t){return y.isPlainObject(t)},_.isArray=function(t){return y.isArray(t)},_.forEach=function(t,e,n){let i,r=n||e;for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i)};const x=n.default,b=u,{compareArrays:v,forEach:C}=_,j={},w=[],q="control",k="["+q+"]",O=b.extend({addControlClassName:!0,window:x(window),document:x(document),_addProxy_:function(t,e,n){return n.length===t&&(n[t-1]=this.proxy(n[t-1])),n.length===e&&(n[e-1]=this.proxy(n[e-1])),n},_event_:function(t,e){let n=this.toArray(e);return n=this._addProxy_(2,3,n),this.element[t].apply(this.element,n),this},init:function(t){this.pushInstance(),this.initElement(t),this.create(t)},pushInstance:function(){w.push(this)},initElement:function(t){this.element=x(t),!0===this.addControlClassName&&this.element.addClass(this.name.split(".").join("-"))},create:function(t){},toArray:function(t){return Array.prototype.slice.call(t)},initBindings:function(){this._bindings_||(this._bindings_=[])},addBinding:function(t){this.initBindings(),this._bindings_.push([].concat(t))},proxy:function(t){return this._proxy_cache_||(this._proxy_cache_={}),this._proxy_cache_[t]||(this._proxy_cache_[t]=this._super(t)),this._proxy_cache_[t]},find:function(){return this.element.find.apply(this.element,arguments)},el:function(t,e,n){return t=x(document.createElement(t)),e&&t.addClass(e),n&&t.attr(n),t},clearProxyCache:function(){C(this._proxy_cache_,(function(t,e){delete this._proxy_cache_[e]}),this)},bind:function(){let t,e=this.toArray(arguments);return this.addBinding(e),e=this._addProxy_(3,4,e),t=this[e[0]]||x(e[0]),t.on.apply(t,e.slice(1)),this},unbind:function(){var t,e=this.toArray(arguments);return this._bindings_=this._bindings_.filter((function(t){return!1===v(t,e)}),this),(t=this[(e=this._addProxy_(3,4,e))[0]]||x(e[0])).off.apply(t,e.slice(1)),this},unbindAll:function(){return this.initBindings(),this._bindings_.forEach((function(t){this.unbind.apply(this,t)}),this),this._bindings_=[],this},on:function(){return this._event_("on",arguments),this},off:function(){return this._event_("off",arguments),this},timeout:function(t,e){return this._idle_timeout_||(this._idle_timeout_={}),clearTimeout(this._idle_timeout_[t]),delete this._idle_timeout_[t],!1===e||(this._idle_timeout_[t]=setTimeout(this.proxy(t),e)),this},destroy:function(){this.off(),this.unbindAll(),this.clearProxyCache(),this.element.removeClass(this.name.split(".").join("-")),this.element.removeData()},canBeDestroyed:function(){return!1===this.document.contains(this.element)}});O.createControl=function(t,e,n){return j[t]?(console.info("control with name [%s] is already exist",t),j[t]):(j[t]=(n?j[e]:O).extend(n||e,t),j[t])},O.sortControls=function(t,e){let n=t.querySelectorAll(k).length,i=e.querySelectorAll(k).length;return n&&!i||n>i?1:!n&&i||n<i?-1:0},O.cleanControls=function(t){w.forEach((function(e,n){(e.canBeDestroyed()||t)&&(e.destroy(),w.splice(n,1))}))},O.initControl=function(t,e){if("function"==typeof j[t])return new j[t](e)},O.initControls=function(t){O.cleanControls(),Array.prototype.slice.call(t.querySelectorAll(k)).sort(O.sortControls).forEach((function(t){t.getAttribute(q).split(",").forEach((function(e){O.initControl(e,t)})),t.removeAttribute(q)}))};var A=O;const E=n.default,P=u,{isArray:M,isPlainObject:S,forEach:z,sortObject:D}=_,N={},R=P.extend({init:function(t){this.extend(t)},extend:function(t){this.$data=t||{}},alt:function(t,e){return void 0===(t=this.attr(t))?e:t},ns:function(t){let e=this,n=t.split("."),i=this.attr(n.slice(0,-1).join("."));return i instanceof R&&(e=i),[e,n.slice(-1).join(".")]},on:function(t,e){let n=this.ns(t);return E.event.add(n[0],n[1],e),this},off:function(t,e){let n=this.ns(t);return E.event.remove(n[0],n[1],e),this},trigger:function(t,e){let n=this.ns(t);return E.event.trigger(n[1],e,n[0],!0),this},$update:function(){},$change:function(){},defer:function(){return E.Deferred()},resolve:function(){return this.defer().resolve(this)},attr:function(t,e){let n,i=0,r=this.$data,o=(t||"").split("."),s=o.pop(),c=arguments.length;for(;i<o.length;i++)if(r&&r.hasOwnProperty(o[i])){if(r[o[i]]&&"function"==typeof r[o[i]].attr)return n=[t.split(".").slice(i+1).join(".")],2===c&&n.push(e),r[o[i]].attr.apply(r[o[i]],n);r=r[o[i]]}else{if(2!==c)break;r=r[o[i]]={}}return 1===c?r?r[s]:void 0:(2===c&&(n=r[s],r[s]=e,this.$change(t,e,n)),this)},eachItem:function(t){let e=t[1]?t[0]:null,n=t[1]?t[1]:t[0],i=e?this.alt(e,[]):this.$data;return{value:D(i),isArray:M(i),callback:n}},each:function(){let t=this.eachItem(arguments);z(t.value,(function(e,n){t.callback(this.instance(e),e,n)}),this)},attrs:function(t){return this.$data=function t(e,n,i){let r;for(r in e)e.hasOwnProperty(r)&&(n[r]&&"function"==typeof n[r].attrs?n[r].attrs(e[r],r):M(e[r])||S(e[r])?(M(e[r])&&(n[r]=n[r]||[]),S(e[r])&&(n[r]=n[r]||{}),t.call(this,e[r],n[r],r)):n[r]=e[r],this.$change(i?i.concat(".",r):r,e[r],n[r]));return n}.call(this,t,this.$data),this.$update(t,this.$data),this},serialize:function(){return function t(e,n){let i;for(i in n)n.hasOwnProperty(i)&&(n[i]&&"function"==typeof n[i].serialize?e[i]=n[i].serialize():M(n[i])||S(n[i])?(M(n[i])&&(e[i]=[]),S(n[i])&&(e[i]={}),t.call(this,e[i],n[i])):e[i]=n[i]);return e}.call(this,{},this.$data)},stringify:function(){return JSON.stringify(this.serialize())}});R.createModel=function(t,e,n){return N[t]||(N[t]=(n?N[e]:R).extend(n||e,t)),N[t]},R.getModel=function(t,e){if("function"==typeof N[t])return new N[t](e)};var T=R;const F=n.default,I={},B={defaults:"en",current:"en",path:"locales/",file:"/translation.json",data:{},load:function(t){return I[t]=I[t]||F.ajax({context:this,url:this.path.concat(t).concat(this.file)}),I[t].then((function(t){this.data=t})),I[t]},config:function(t){return F.extend(!0,B,t),B},lang:function(t){return this.current=t,this},get:function(t){return this.data[t]||t}};var L=B;const H=n.default,U=a,J=/[^\[\]]+|\[\]$/g;function W(t){let e;for(e in t)t.hasOwnProperty(e)&&(0===t[e].length?(H.isArray(t)&&t.splice(e,1),H.isPlainObject(t)&&delete t[e]):"object"==typeof t[e]&&W(t[e]));return t}var G={setFormData:function(t){return this.find("[name]").each((function(){let e=H(this),n=e.attr("name").match(J),i=function(t,e){for(var n=0,i=(e||"").split("."),r=i.pop();n<i.length&&t&&t.hasOwnProperty(i[n]);n++)t=t[i[n]];return t?t[r]:null}(t,n.join("."));i&&(e.is(":radio")?e.val()===i&&e.attr("checked",!0):e.is(":checkbox")?(i=H.isArray(i)?i:[i],H.inArray(e.val(),i)>-1&&e.attr("checked",!0)):e.val(i))})),this},getFormData:function(t,e){let n=H.map(this.serializeArray(),(function(t){return[t.name,encodeURIComponent(t.value)].join("=")})).join("&"),i=U(n,e,!1);return!0===t?W(i):i}};const K=n.default,Q=u,V=A,X={},Y={},Z={},tt={},et={},nt=/<%([\s\S]+?)%>/g,it=/<%=([\s\S]+?)%>/g,rt=/<%-([\s\S]+?)%>/g,ot=/(.)^/,st={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},ct=/[\\'\r\n\t\u2028\u2029]/g,ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},at=new RegExp("[&<>\"']","g"),lt=function(t,e,n){let i,r=n||e;for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i)},ht=function(t,e){return(t||"").replace(/{(.+?)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))},ft=function(t){let e=1e6,n=String(e).length-1,i=Math.abs(Math.random())*e,r=String((new Date).getTime()).match(/.{1,7}/g),o=parseFloat(String(i)).toFixed(n).split(".");return[t].concat(o).concat(r).join("-")},pt=function(t){return null==t?"":(""+t).replace(at,(function(t){return ut[t]}))},dt=function(t,e){let n,i=new RegExp([(rt||ot).source,(it||ot).source,(nt||ot).source].join("|")+"|$","g"),r=0,o="__p+='";(t||"").replace(i,(function(e,n,i,s,c){var u;return o+=null==(u=t.slice(r,c))?"":(""+u).replace(ct,(function(t){return"\\"+st[t]})),n&&(o+="'\n+((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(o+="'\n+((__t=("+i+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+";\n__p+='"),r=c+e.length,e})),o+="';",o="with(obj||{}){\n"+o+"}",o="var __t,__p='',__j=[].join,print=function(){__p+=__j.call(arguments,'');};"+o+"return __p;\n//# sourceURL=["+e+"]";try{n=new Function("obj","escapeExpr",o)}catch(t){console.error(t)}let s=function(t){let e="";try{e=n&&n.call(this,t,pt)}catch(t){console.error(t)}return e};return s.source="function(obj){"+o+"}",s},_t=Q.extend({init:function(t,e){this.source=mt.source(t),this.compile(this.source,e)},compile:function(t,e){return this.output=dt(t,e),this},renderHTML:function(t){return t=this.extend(t),this.output.call(t,t)},render:function(t){let e=function(t){let e=document.createElement("template");if("content"in e)return e.innerHTML=t,document.importNode(e.content,!0);let n=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=t;i.firstChild;)n.appendChild(i.firstChild);return n}(this.renderHTML(t));return function(t){lt(Z,(function(e,n,i,r){if(null===(i=t.getElementById(n)))return!1;r=document.createElement(e.tag),i.parentNode&&i.parentNode.replaceChild(r,i),"function"==typeof e.callback&&e.callback(r),delete Z[n]}))}(e),function(t){lt(tt,(function(e,n){let i=t.querySelector(e.selector);null!==i&&(i.removeAttribute(n),"function"==typeof e.callback&&e.callback(i),delete tt[n])}))}(e),e},extend:function(t){return K.extend({},this,t||{},xt)}}),yt=["ejs","html","svg","css","js"],gt=function(t){return new RegExp("^(.+)(\\.)("+t.join("|")+")$")},mt={ext:yt,exp:gt(yt),set:function(t){this.ext=t,this.exp=gt(t)},name:function(t){return String(t).replace(this.exp,"$1")},get:function(t){let e=0,n=!1,i=this.ext,r=Y,o=this.name(t);for(;e<i.length&&(n=r[[o,i[e]].join(".")],!n);e++);return n},source:function(t){return this.get(t)||t}},xt={$include:function(t,e){return bt(ht(t,this)).renderHTML(e)},$each:function(t,e,n){lt(t,e,n)},$view:function(t,e){let n=ft("node");return Z[n]={tag:t,callback:e},ht('<view id="{0}"></view>',[n])},$prop:function(t){let e=ft("attr");return tt[e]={selector:["[",e,"]"].join(""),callback:t},["",e,""].join(" ")},$control:function(t,e,n){return this.$view(t,(function(t){V.initControl(e,t)}))}};function bt(t){return et[t]||(et[t]=new _t(t)),et[t]}bt.resolver=mt,bt.preload=function(t){return X[t]=X[t]||K.get(t).then((function(t){K.extend(Y,t)})),X[t]},bt.helper=function(t,e){xt[t]=e};var vt=bt;const Ct=n.default,jt=u,wt=T,qt=vt,kt=A,Ot=d,$t={hashchange:function(t){Ot.bind((function(){t(this.path())})),""===Ot.part(0)?Ot.assign("/"):t(Ot.path())}};wt.createModel("router.queue",{init:function(t){this.response=t,this.start()},start:function(){this.list={},this.defer=Ct.Deferred(),this.defer.progress((function(t,e){this.complete(t,e)}))},empty:function(){return Ct.isEmptyObject(this.list)},complete:function(t,e){this.remove(t),this.response.attr(t,e),this.empty()&&(this.defer.resolve(),this.start())},remove:function(t){delete this.list[t]},then:function(t){return this.empty()?t():this.defer.then(t),this},stop:function(){Object.keys(this.list).forEach((function(t){this.list[t].reject(),this.remove(t)}),this),this.list={}},add:function(t,e){let n=this;return n.list[t]=e.then((function(e){n.defer.notifyWith(n,[t,e])}),(function(){n.defer.notifyWith(n,[t])})),n}}),wt.createModel("router.response",{init:function(t){this.extend(t),this.__q=wt.getModel("router.queue",this)},queue:function(t,e){return this.__q.add(t,e),this},then:function(t){return this.__q.then(t),this},stop:function(){return this.__q.stop(),this},render:function(t,e,n){return t=document.querySelector(t),e=qt(e).render(n),t.innerHTML="",t.appendChild(e),kt.initControls(t),t}}),wt.createModel("router.request",{query:function(){let t=Ot.query();return this.attr("query",t),t},match:function(t){return new RegExp(t).test(this.attr("path"))},model:function(){let t=[].slice.call(arguments),e=t.shift(),n=t.shift(),i=wt.getModel(e);return n&&"function"==typeof i[n]?i[n].apply(i,t):i},getChildPath:function(){return"/".concat(this.alt("params._path_",""))},path:function(t){this.attr("path",t)},params:function(t){t=Ct.extend({},this.alt("parent",{}),t),this.attr("params",t),this.attr("parent",t)}}),jt.createClass("route",{init:function(t){this.params={},this.callbacks=[],this.name=t,this.regex=function(t){let e,n=[];return t=(t=t.concat("/?")).replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,(function(t,e,i,r,o,s){return n.push({name:r,optional:!!s}),e=e||"",(s?"":e)+"(?:"+(s?e:"")+(i||"")+(o||i&&"([^/.]+?)"||"([^/]+?)")+")"+(s||"")})).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)").replace(/@num/g,"\\d+").replace(/@word/g,"\\w+"),e=new RegExp("^"+t+"$",""),e.keys=n,e}(t)},then:function(t){return this.callbacks.push(t),this},match:function(t){return this.path=t,this.params=function(t,e){let n,i=t.exec(e),r={};if(!i)return!1;for(var o=1,s=i.length;o<s;++o)(n=t.keys[o-1])&&(r[n.name]="string"==typeof i[o]?decodeURIComponent(i[o]):i[o]);return r}(this.regex,this.path),!!this.params},getCallbacks:function(){return this.callbacks}});var At=jt.createClass("router",{init:function(){this._before_=[],this._after_=[],this._routes_={},this.request=wt.getModel("router.request"),this.response=wt.getModel("router.response")},prepare:function(){this.request.attr("path",""),this.request.attr("params",{}),this.request.attr("parent",{}),this.response.attr("data",{}),this.response.stop()},route:function(t){let e=this._routes_[t]||jt.getClass("route",t);return this._routes_[t]=e,e},use:function(t){return this.route(t.concat("/",":_path_(*)?"))},before:function(t){return this._before_.push(t),this},after:function(t){return this._after_.push(t),this},call:function(t,e,n,i){this.request=e,this.response=n,this.find(this.request.getChildPath(),i)},apply:function(t,e){this.call(t,e[0],e[1],e[2])},process:function(t,e){!function n(i,r){let o=[];if(!1===(t[r]||!1))return e&&e.call&&e.call(i);o.push(i.request),o.push(i.response),o.push((function(){i.response.then((function(){n(i,++r)}))})),t[r].apply(i,o)}(this,0)},start:function(t,e){this.request.path(t.path),this.request.params(t.params),this.request.query(),this.process(this._before_,(function(){this.process(t.getCallbacks(),(function(){this.process(this._after_,e)}))}))},find:function(t,e){let n,i=jt.getClass("route",t);for(n in!0===e&&this.prepare(),this._routes_)if(this._routes_.hasOwnProperty(n)&&(n=this._routes_[n],n.match(t))){i=n;break}this.start(i,e)},listen:function(t){var e;return"string"==typeof t&&"function"==typeof $t[t]&&(t=$t[t]),t((e=this,function(t){e.find(t,!0)})),this}});const $=n.default,Et=u,Pt=d,Mt=A,St=T,zt=L,Dt=G,Nt=At,Rt=vt;return $.Class=Et,$.Model=St,$.Control=Mt,$.Router=Nt,$.createClass=Et.createClass,$.getClass=Et.getClass,$.createModel=St.createModel,$.getModel=St.getModel,$.createControl=Mt.createControl,$.initControl=Mt.initControl,$.location=Pt,$.locale=zt,$.ejs=Rt,$.fn.extend({setFormData:Dt.setFormData,getFormData:Dt.getFormData,initControls:function(){this.each((function(t,e){Mt.initControls(e)}))}}),$}));
//# sourceMappingURL=jquery.control.min.js.map
