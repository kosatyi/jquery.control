{"version":3,"file":"jquery.control.min.js","sources":["../src/core/class.js","../src/core/jquery.js","../src/utils/deparam.js","../src/core/location.js","../src/utils/index.js","../src/core/control.js","../src/core/model.js","../src/plugins/locale.js","../src/core/form.js","../src/core/view.js","../src/core/router.js","../src/index.js"],"sourcesContent":["const classes = {};\n\nlet init = false;\n\nconst fnTest = /xyz/.test(function () {\n    return 'xyz';\n}.toString()) ? /\\b_super\\b/ : /.*/;\n\nconst superMethod = function(parent,name,method){\n    return function () {\n        var temp = this._super, result;\n        this._super = parent[name];\n        result = method.apply(this,arguments);\n        this._super = temp;\n        return result;\n    };\n}\n\nconst assign = function(target,instance){\n    var prop,proto,parent = target.prototype;\n    init = true;\n    proto = new target();\n    init = false;\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (typeof (parent[prop]) == 'function' &&\n                typeof (instance[prop]) == 'function' &&\n                fnTest.test(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent,prop,instance[prop]);\n            } else {\n                proto[prop] = instance[prop];\n            }\n        }\n    }\n    return proto;\n}\n/**\n * @name Class\n * @constructor\n */\nconst Class = function(){\n\n};\n\nClass.prototype._super = function(){\n\n}\n\nClass.prototype.instance = function(params){\n    return new this.constructor(params);\n}\n\nClass.prototype.proxy = function(fn){\n    fn = typeof (fn) == 'string' ? this[fn] : fn;\n    return (function (cx, cb) {\n        return function () {\n            return cb.apply(cx, [this].concat([].slice.call(arguments)))\n        };\n    })(this, fn);\n}\n\nClass.extend = function extend(instance,name){\n    /**\n     *\n     * @constructor\n     * @property {Function} init\n     */\n    function Class(){\n        if (!init && this.init) this.init.apply(this, arguments);\n    }\n    Class.prototype = assign(this,instance);\n    Class.prototype.name = name;\n    Class.prototype.constructor = Class;\n    Class.extend = extend;\n    return Class;\n}\n\nClass.createClass = function(name, extend, proto) {\n    if (classes[name]) {\n        return classes[name];\n    }\n    classes[name] = (proto ? classes[extend] : Class).extend(proto ? proto : extend, name);\n    return classes[name];\n}\n\nClass.getClass = function(name, data) {\n    if (typeof(classes[name]) !== 'function') return null;\n    return new classes[name](data);\n}\n\nmodule.exports = Class;\n","module.exports = window['jQuery']","function deparam(params, coerce, spaces) {\n    let obj = {},\n        coerce_types = {'true': !0, 'false': !1, 'null': null};\n    if (spaces) params = params.replace(/\\+/g, ' ');\n    params.split('&').forEach(function (v) {\n        let param = v.split('='),\n            key = decodeURIComponent(param[0]),\n            val,\n            cur = obj,\n            i = 0,\n            keys = key.split(']['),\n            keys_last = keys.length - 1;\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keys_last])) {\n            keys[keys_last] = keys[keys_last].replace(/]$/, '');\n            keys = keys.shift().split('[').concat(keys);\n            keys_last = keys.length - 1;\n        } else {\n            keys_last = 0;\n        }\n        if (param.length === 2) {\n            val = decodeURIComponent(param[1]);\n            if (coerce) {\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val\n                    : val === 'undefined' ? undefined\n                        : coerce_types[val] !== undefined ? coerce_types[val]\n                            : val;\n            }\n            if (keys_last) {\n                for (; i <= keys_last; i++) {\n                    key = keys[i] === '' ? cur.length : keys[i];\n                    cur = cur[key] = i < keys_last\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\n                        : val;\n                }\n            } else {\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n                    obj[key].push(val);\n                } else if ({}.hasOwnProperty.call(obj, key)) {\n                    obj[key] = [obj[key], val];\n                } else {\n                    obj[key] = val;\n                }\n            }\n\n        } else if (key) {\n            obj[key] = coerce\n                ? undefined\n                : '';\n        }\n    });\n    return obj;\n}\n\nmodule.exports = deparam;","const $ = require('./jquery');\n\nconst deparam = require('../utils/deparam');\n\nlet skip  = false;\n\nconst instance = {\n    prefix: '#',\n    type: 'hash',\n    event:'hashchange.location',\n    callbacks: [],\n    initialize: false,\n    url: function (url, replace) {\n        location[replace === true ? 'replace' : 'assign'](url);\n        return this;\n    },\n    normalize: function (url) {\n        let prefix = this.prefix;\n        if (url.indexOf('http') === 0) prefix = '';\n        else if (url.indexOf('#') === 0) prefix = '';\n        return [prefix, url].join('');\n    },\n    assign: function (url, silent) {\n        skip = silent;\n        return this.url(this.normalize(url));\n    },\n    replace: function (url, silent) {\n        skip = silent;\n        return this.url(this.normalize(url), true);\n    },\n    href: function () {\n        return location[this.type].slice(1);\n    },\n    part: function (index) {\n        return this.href().split('#')[0].split('?')[index] || '';\n    },\n    query: function (value, replace, silent) {\n        if (arguments.length) {\n            value = value ? [this.part(0), $.param(value)].join('?') : this.part(0);\n            this[replace ? 'replace' : 'assign'](value, silent);\n        } else {\n            return deparam(this.part(1));\n        }\n    },\n    path: function (value, replace, silent) {\n        if (arguments.length) {\n            value = this.part(1) ? [value, this.part(1)].join('?') : value || '/';\n            this[replace ? 'replace' : 'assign'](value, silent);\n        } else {\n            return this.part(0);\n        }\n    },\n    json: function(value,replace,silent){\n        let href  = this.href();\n        let chunk = href.split('#')[0].split('?')[1] || '{}';\n        if (arguments.length) {\n            value = value ? [this.part(0),JSON.stringify(value)].join('?') : this.part(0);\n            this[replace ? 'replace' : 'assign'](value, silent);\n        } else {\n            try{\n                chunk = decodeURIComponent(chunk);\n                chunk = JSON.parse(chunk);\n            } catch(e){\n                chunk = {};\n            }\n            return chunk;\n        }\n    },\n    proxy: function (callback) {\n        return (function (cx) {\n            return function () {\n                return cx[callback].apply(cx, arguments);\n            }\n        })(this);\n    },\n    bind: function (callback) {\n        this.callbacks.push(callback);\n        if (this.initialize === false) {\n            this.initialize = true;\n            $(window).on(this.event,this.proxy('change'));\n        }\n    },\n    unbind: function (callback) {\n        this.callbacks.splice(this.callbacks.indexOf(callback), 1);\n    },\n    host: function () {\n        return location.host;\n    },\n    indexOf: function (str, index) {\n        return this.href().indexOf(str) === index;\n    },\n    change: function () {\n        let index;\n        if (skip === true) {\n            return skip = false;\n        }\n        if (this.callbacks.length) {\n            for (index in this.callbacks) {\n                if(this.callbacks.hasOwnProperty(index)){\n                    this.callbacks[index].call(this);\n                }\n            }\n        }\n    }\n};\n\n\nmodule.exports = instance;","const $ = require('../core/jquery');\n/**\n *\n * @param value\n * @return {*}\n */\nconst isArray = function (value) {\n    return $.isArray(value);\n};\n/**\n *\n * @param value\n * @returns {*}\n */\nconst isPlainObject = function (value) {\n    return $.isPlainObject(value);\n};\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nconst forEach = function (object, callback, thisArg) {\n    let prop, context = thisArg || callback;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n};\n\n/**\n *\n * @param obj\n * @returns {{}}\n */\nconst sortObject = function (obj) {\n    return Object.keys(obj).sort().reduce(function (result, key) {\n        result[key] = obj[key];\n        return result;\n    }, {});\n};\n\nconst arrayStringify = function(a){\n    return JSON.stringify(a.slice().sort());\n};\n\nconst compareArrays = function(a1,a2){\n    return arrayStringify(a1) === arrayStringify(a2);\n};\n\nexports.arrayStringify = sortObject\nexports.compareArrays = compareArrays\n\nexports.sortObject = sortObject\nexports.isPlainObject = isPlainObject\nexports.isArray = isArray\nexports.forEach = forEach","const $ = require('./jquery');\nconst Class = require('./class');\nconst {compareArrays, forEach} = require('../utils')\nconst classes  = {};\nconst controls = [];\nconst ATTR = 'control';\nconst ATTR_SELECTOR = '['+ ATTR +']';\n\n/**\n * @name Control\n * @property {jQuery} element\n * @property {jQuery} window\n * @property {jQuery} document\n * @type {Class|*}\n */\nconst Control = Class.extend({\n    addControlClassName: true,\n    window: $(window),\n    document: $(document),\n    /**\n     *\n     * @param f\n     * @param s\n     * @param p\n     * @returns {*}\n     * @private\n     */\n    _addProxy_:function(f,s,p){\n        if (p.length === f) p[f-1] = this.proxy(p[f-1]);\n        if (p.length === s) p[s-1] = this.proxy(p[s-1]);\n        return p;\n    },\n    /**\n     *\n     * @param type\n     * @param params\n     * @returns Control\n     * @private\n     */\n    _event_:function(type,params){\n        let args = this.toArray(params);\n        args = this._addProxy_(2,3,args);\n        this.element[type].apply(this.element, args);\n        return this;\n    },\n    /**\n     * @constructor\n     * @param element\n     */\n    init: function (element) {\n        this.pushInstance();\n        this.initElement(element);\n        this.create(element);\n    },\n    /**\n     *\n     */\n    pushInstance: function () {\n        controls.push(this);\n    },\n    /**\n     *\n     * @param element\n     */\n    initElement: function (element) {\n        this.element = $(element);\n        if( this.addControlClassName === true ){\n            this.element.addClass(this.name.split('.').join('-'));\n        }\n    },\n    /**\n     *\n     * @param element\n     */\n    create: function (element) {\n\n    },\n    /**\n     *\n     * @param arr\n     * @returns {*[]}\n     */\n    toArray: function (arr) {\n        return Array.prototype.slice.call(arr);\n    },\n    /**\n     *\n     */\n    initBindings: function () {\n        if (!this._bindings_){\n            this._bindings_ = [];\n        }\n    },\n    /**\n     *\n     * @param args\n     */\n    addBinding: function (args) {\n        this.initBindings();\n        this._bindings_.push([].concat(args));\n    },\n    /**\n     *\n     * @param fn\n     * @returns {*}\n     */\n    proxy: function (fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {};\n        if (!this._proxy_cache_[fn]) {\n            this._proxy_cache_[fn] = this._super(fn);\n        }\n        return this._proxy_cache_[fn];\n    },\n    /**\n     * @returns {jQuery.prototype}\n     */\n    find: function () {\n        return this.element.find.apply(this.element, arguments);\n    },\n    /**\n     *\n     * @param tag\n     * @param className\n     * @param attrs\n     * @returns {jQuery.prototype}\n     */\n    el: function (tag, className, attrs) {\n        tag = $(document.createElement(tag));\n        if (className) tag.addClass(className);\n        if (attrs) tag.attr(attrs);\n        return tag;\n    },\n    clearProxyCache: function () {\n        forEach(this._proxy_cache_,function(value,prop){\n            delete this._proxy_cache_[prop];\n        },this)\n    },\n    bind: function () {\n        let el, args = this.toArray(arguments);\n        this.addBinding(args);\n        args = this._addProxy_(3,4,args);\n        el = this[args[0]] || $(args[0]);\n        el.on.apply(el, args.slice(1));\n        return this;\n    },\n    unbind: function () {\n        let el, args = this.toArray(arguments);\n        this.initBindings();\n        this._bindings_ = this._bindings_.filter(function(item){\n            return compareArrays(item,args) === false;\n        },this);\n        args = this._addProxy_(3,4,args);\n        el = this[args[0]] || $(args[0]);\n        el.off.apply(el, args.slice(1));\n        return this;\n    },\n    unbindAll: function () {\n        this.initBindings();\n        this._bindings_.forEach(function (value) {\n            this.unbind.apply(this,value);\n        },this);\n        this._bindings_ = [];\n        return this;\n    },\n    on: function () {\n        this._event_('on',arguments);\n        return this;\n    },\n    off: function () {\n        this._event_('off',arguments);\n        return this;\n    },\n    timeout: function (callback, time) {\n        if (!this._idle_timeout_) this._idle_timeout_ = {};\n        clearTimeout(this._idle_timeout_[callback]);\n        delete this._idle_timeout_[callback];\n        if( time === false ) return this;\n        this._idle_timeout_[callback] = setTimeout(this.proxy(callback), time);\n        return this;\n    },\n    destroy: function () {\n        this.off();\n        this.unbindAll();\n        this.clearProxyCache();\n        this.element.removeClass(this.name.split('.').join('-'));\n        this.element.removeData();\n    },\n    canBeDestroyed: function () {\n        return $.contains(document,this.element.get(0)) === false\n    }\n});\n\nfunction sortControls(a, b) {\n    let c = a.querySelectorAll(ATTR_SELECTOR).length,\n        d = b.querySelectorAll(ATTR_SELECTOR).length;\n    if ((c && !d) || (c > d)) return 1;\n    if ((!c && d) || (c < d)) return -1;\n    return 0;\n}\n\nfunction cleanControls(force) {\n    controls.forEach(function (control,index) {\n        if (control.canBeDestroyed() || force) {\n            control.destroy();\n            controls.splice(index,1)\n        }\n    });\n}\n\n/**\n *\n * @param name\n * @param extend\n * @param proto\n * @returns {Control}\n */\nfunction createControl(name, extend, proto) {\n    if (classes[name]) {\n        console.info('control with name [%s] is already exist', name);\n        return classes[name];\n    }\n    classes[name] = (proto ? classes[extend] : Control).extend(proto ? proto : extend, name);\n    return classes[name];\n}\n/**\n *\n * @param name\n * @param params\n * @returns new {Control}\n */\nfunction initControl(name, params) {\n    if (typeof(classes[name]) !== 'function') return;\n    return new classes[name](params);\n}\n\nfunction initControls(element){\n    Control.cleanControls();\n    Array.prototype.slice.call(element.querySelectorAll(ATTR_SELECTOR))\n        .sort(Control.sortControls)\n        .forEach(function (item) {\n            item.getAttribute(ATTR).split(',').forEach(function (name) {\n                Control.initControl(name, item);\n            });\n            item.removeAttribute(ATTR);\n        });\n}\n\nControl.createControl = createControl;\n\nControl.sortControls  = sortControls;\n\nControl.cleanControls = cleanControls;\n\nControl.initControl   = initControl;\n\nControl.initControls  = initControls;\n\nmodule.exports = Control;\n","const $ = require('./jquery');\nconst Class = require('./class');\nconst {isArray,isPlainObject,forEach,sortObject} = require('../utils')\n/**\n *\n * @type {{}}\n */\nconst classes = {};\n\n/**\n * @name Model\n * @type {Class|*}\n */\nconst Model = Class.extend({\n    init: function (data) {\n        this.extend(data);\n    },\n    extend: function (data) {\n        if (data) {\n            this.$data = data;\n        } else {\n            this.$data = {};\n        }\n    },\n    alt: function (prop, defaults) {\n        prop = this.attr(prop);\n        return typeof (prop) === 'undefined' ? defaults : prop;\n    },\n    ns: function (name) {\n        let context = this;\n        let chunk = name.split('.');\n        let child = this.attr(chunk.slice(0, -1).join('.'));\n        if (child instanceof Model) {\n            context = child;\n        }\n        return [context, chunk.slice(-1).join('.')];\n    },\n    on: function (name, callback) {\n        let ns = this.ns(name);\n        $.event.add(ns[0], ns[1], callback);\n        return this;\n    },\n    off: function (name, callback) {\n        let ns = this.ns(name);\n        $.event.remove(ns[0], ns[1], callback);\n        return this;\n    },\n    trigger: function (name, data) {\n        let ns = this.ns(name);\n        $.event.trigger(ns[1], data, ns[0], true);\n        return this;\n    },\n    $update: function () {\n\n    },\n    $change: function () {\n\n    },\n    defer: function () {\n        return $.Deferred();\n    },\n    resolve: function () {\n        return this.defer().resolve(this);\n    },\n    attr: function (key, value) {\n        let i = 0, tmp,\n            data = this.$data,\n            name = (key || '').split('.'),\n            prop = name.pop(),\n            len = arguments.length;\n        for (; i < name.length; i++) {\n            if (data && data.hasOwnProperty(name[i])) {\n                if (data[name[i]] && typeof (data[name[i]]['attr']) === 'function') {\n                    tmp = [key.split('.').slice(i + 1).join('.')];\n                    len === 2 && tmp.push(value);\n                    return data[name[i]].attr.apply(data[name[i]], tmp);\n                } else {\n                    data = data[name[i]];\n                }\n            } else {\n                if (len === 2) {\n                    data = (data[name[i]] = {});\n                } else {\n                    break;\n                }\n            }\n        }\n        if (len === 1) {\n            return data ? data[prop] : undefined;\n        }\n        if (len === 2) {\n            tmp = data[prop];\n            data[prop] = value;\n            this.$change(key, value, tmp);\n        }\n        return this;\n    },\n    eachItem: function (args) {\n        let name = args[1] ? args[0] : null;\n        let callback = args[1] ? args[1] : args[0];\n        let value = name ? this.alt(name, []) : this.$data;\n        return {\n            value: sortObject(value),\n            isArray: isArray(value),\n            callback: callback\n        }\n    },\n    each: function () {\n        let each = this.eachItem(arguments);\n        forEach(each.value, function (value, key) {\n            each.callback(this.instance(value), value, key);\n        }, this);\n    },\n    attrs: function (props) {\n        this.$data = (function callback(data, parent, path) {\n            let prop\n            for (prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    if (parent[prop] && typeof (parent[prop]['attrs']) === 'function') {\n                        parent[prop].attrs(data[prop], prop);\n                    } else {\n                        if (isArray(data[prop]) || isPlainObject(data[prop])) {\n                            if (isArray(data[prop])) parent[prop] = parent[prop] || [];\n                            if (isPlainObject(data[prop])) parent[prop] = parent[prop] || {};\n                            callback.call(this, data[prop], parent[prop], prop);\n                        } else {\n                            parent[prop] = data[prop];\n                        }\n                    }\n                    this.$change(path ? path.concat('.', prop) : prop, data[prop], parent[prop]);\n                }\n            }\n            return parent;\n        }).call(this, props, this.$data);\n        this.$update(props, this.$data);\n        return this;\n    },\n    serialize: function () {\n        return (function callback(result, data) {\n            let prop;\n            for (prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    if (data[prop] && typeof (data[prop]['serialize']) === 'function') {\n                        result[prop] = data[prop].serialize();\n                    } else {\n                        if (isArray(data[prop]) || isPlainObject(data[prop])) {\n                            if (isArray(data[prop])) result[prop] = [];\n                            if (isPlainObject(data[prop])) result[prop] = {};\n                            callback.call(this, result[prop], data[prop]);\n                        } else {\n                            result[prop] = data[prop]\n                        }\n                    }\n                }\n            }\n            return result;\n        }).call(this, {}, this.$data);\n    },\n    stringify: function () {\n        return JSON.stringify(this.serialize());\n    }\n});\n/**\n *\n * @param name\n * @param extend\n * @param proto\n * @returns {*}\n */\nModel.createModel = function (name, extend, proto) {\n    if (classes[name]) {\n        return classes[name];\n    }\n    classes[name] = (proto ? classes[extend] : Model).extend(proto ? proto : extend, name);\n    return classes[name];\n};\n/**\n *\n * @param name\n * @param data\n * @returns {*}\n */\nModel.getModel = function (name, data) {\n    if (typeof (classes[name]) !== 'function') return;\n    return new classes[name](data);\n};\n\nmodule.exports = Model;","const $ = require('../core/jquery');\n/**\n *\n * @type {{}}\n */\nconst cache = {};\n/**\n *\n * @type {object}\n */\nconst Locale = {\n    defaults: 'en',\n    current: 'en',\n    path: 'locales/',\n    file: '/translation.json',\n    data: {}\n};\n/**\n *\n * @param lang\n * @returns {*}\n */\nLocale.load = function (lang) {\n    cache[lang] = cache[lang] || $.ajax({\n        context: this,\n        url: this.path.concat(lang).concat(this.file)\n    });\n    cache[lang].then(function (data) {\n        this.data = data;\n    });\n    return cache[lang];\n};\n\nLocale.config = function(params){\n    $.extend(true,Locale,params);\n    return Locale;\n};\n/**\n *\n * @param lang\n * @returns {Locale}\n */\nLocale.lang = function (lang) {\n    this.current = lang;\n    return this;\n};\n\n/**\n *\n * @param value\n * @returns {*}\n */\nLocale.get = function (value) {\n    return this.data[value] || value;\n};\n\nmodule.exports = Locale;","const $ = jQuery;\n/**\n *\n * @type {function(*, *=, *=): {}}\n */\nconst deparam = require('../utils/deparam');\n/**\n *\n * @type {RegExp}\n */\nconst breaker = /[^\\[\\]]+|\\[\\]$/g;\n\n/**\n *\n * @param data\n * @param attr\n * @returns {*|null}\n */\nfunction attr(data, attr) {\n    var i = 0,\n        name = (attr || '').split('.'),\n        prop = name.pop();\n    for (; i < name.length; i++) {\n        if (data && data.hasOwnProperty(name[i])) {\n            data = data[name[i]];\n        } else {\n            break;\n        }\n    }\n    return data ? data[prop] : null;\n}\n\n/**\n *\n * @param obj\n * @returns {*}\n */\nfunction clean(obj) {\n    let prop;\n    for (prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            if (obj[prop].length === 0) {\n                if($.isArray(obj)) obj.splice(prop, 1);\n                if($.isPlainObject(obj)) delete obj[prop];\n            } else if (typeof (obj[prop]) == 'object') {\n                clean(obj[prop]);\n            }\n        }\n    }\n    return obj;\n}\n\n/**\n *\n * @param filter\n * @param coerce\n * @returns {*}\n */\nfunction getFormData(filter,coerce){\n    let form   = $.map(this.serializeArray(), function (field) {\n        return [field.name, encodeURIComponent(field.value)].join('=');\n    }).join('&');\n    let params = deparam(form, coerce, false);\n    return filter === true ? clean(params) : params;\n}\n\n/**\n *\n * @param data\n * @returns {setFormData}\n */\nfunction setFormData( data ) {\n    this.find('[name]').each(function(){\n        let current = $(this);\n        let parts = current.attr('name').match(breaker);\n        let value = attr(data,parts.join('.'));\n        if (value) {\n            if (current.is(\":radio\")) {\n                if (current.val() === value) {\n                    current.attr(\"checked\", true);\n                }\n            } else if (current.is(\":checkbox\")) {\n                value = $.isArray(value) ? value : [value];\n                if ($.inArray(current.val(), value) > -1) {\n                    current.attr(\"checked\", true);\n                }\n            } else {\n                current.val(value);\n            }\n        }\n    });\n    return this;\n}\n\nmodule.exports = {\n    deparam: deparam,\n    clean: clean,\n    setFormData: setFormData,\n    getFormData: getFormData\n};","const $ = require('./jquery');\n\nconst Class = require('./class');\nconst Control = require(\"./control\");\n\nconst listPreload = {};\nconst listView = {};\nconst listAttr = {};\nconst listProp = {};\nconst listCache = {};\n\nconst settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g,\n    variable: false\n};\n\nconst noMatch = /(.)^/;\n\nconst escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n};\n\nconst escaper = /[\\\\'\\r\\n\\t\\u2028\\u2029]/g;\n\nconst htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n};\n\nconst entityRe = new RegExp('[&<>\"\\']', 'g');\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nconst forEach = function (object, callback, thisArg) {\n    let prop, context = thisArg || callback;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n};\n/**\n *\n * @param value\n * @param params\n * @return {string}\n */\nconst stringFormat = function (value, params) {\n    return (value || '').replace(/{(.+?)}/g, function (match, prop) {\n        return typeof (params[prop]) != 'undefined' ? params[prop] : match;\n    });\n};\n\n/**\n *\n * @return {string}\n */\nconst uid = function (ns) {\n    let size = 1000000;\n    let length = String(size).length - 1;\n    let random = Math.abs(Math.random()) * size;\n    let time = String(new Date().getTime()).match(/.{1,7}/g);\n    let result = parseFloat(String(random)).toFixed(length).split('.');\n    return [ns].concat(result).concat(time).join('-');\n};\n/**\n *\n * @param element\n */\nconst mountNodes = function (element) {\n    forEach(listAttr, function (data, id, item, node) {\n        if ((item = element.getElementById(id)) === null) return false;\n        node = document.createElement(data.tag);\n        item.parentNode && item.parentNode.replaceChild(node, item);\n        if (typeof (data.callback) === 'function') {\n            data.callback(node);\n        }\n        delete listAttr[id];\n    })\n};\n/**\n *\n * @param element\n */\nconst mountProps = function (element) {\n    forEach(listProp, function (item, attr) {\n        let node = element.querySelector(item.selector);\n        if (node === null) return;\n        node.removeAttribute(attr);\n        if (typeof (item.callback) === 'function') {\n            item.callback(node);\n        }\n        delete listProp[attr];\n    });\n};\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeExpr = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match];\n    });\n};\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeString = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(escaper, function (match) {\n        return '\\\\' + escapes[match];\n    });\n};\n/**\n *\n * @param text\n * @param name\n * @return {function(*=): string}\n */\nconst compile = function (text, name) {\n    let render;\n    let matcher = new RegExp([\n        (settings.escape || noMatch).source,\n        (settings.interpolate || noMatch).source,\n        (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n    let index = 0;\n    let source = \"__p+='\";\n    (text||'').replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n        source += escapeString(text.slice(index, offset));\n        if (escape) source += \"'\\n+((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\";\n        if (interpolate) source += \"'\\n+((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n        if (evaluate) source += \"';\\n\" + evaluate + \";\\n__p+='\";\n        index = offset + match.length;\n        return match;\n    });\n    source += \"';\";\n    source = \"with(obj||{}){\\n\" + source + \"}\";\n    source = \"var __t,__p='',__j=[].join,print=function(){__p+=__j.call(arguments,'');};\"\n        + source + \"return __p;\\n//# sourceURL=[\" + name + \"]\";\n    try {\n        render = new Function('obj', 'escapeExpr', source);\n    } catch (e) {\n        console.error(e);\n    }\n    let template = function (data) {\n        let output = '';\n        try {\n            output = render && render.call(this, data, escapeExpr);\n        } catch (e) {\n            console.error(e);\n        }\n        return output;\n    };\n    template.source = 'function(obj){' + source + '}';\n    return template;\n};\n\n/**\n *\n * @param html\n * @return {DocumentFragment}\n */\nconst fragment = function(html) {\n    let template = document.createElement('template');\n    if ('content' in template) {\n        template.innerHTML = html;\n        return document.importNode(template.content, true);\n    }\n    let frag = document.createDocumentFragment();\n    let div = document.createElement('div');\n    div.innerHTML = html;\n    while (div.firstChild) {\n        frag.appendChild(div.firstChild);\n    }\n    return frag;\n}\n\n\n/**\n * @name Template\n * @type {Class|*}\n */\nconst template = Class.extend({\n    init: function (source, name) {\n        this.source = resolver.source(source);\n        this.compile(this.source, name);\n    },\n    compile: function (source, name) {\n        this.output = compile(source, name);\n        return this;\n    },\n    renderHTML: function (data) {\n        data = this.extend(data);\n        return this.output.call(data, data);\n    },\n    render: function (data) {\n        let element = fragment(this.renderHTML(data));\n        mountNodes(element);\n        mountProps(element);\n        return element;\n    },\n    extend: function (data) {\n        return $.extend({}, this, data || {}, helpers);\n    }\n});\n/**\n *\n * @type {string[]}\n */\nconst defaultExtList  = ['ejs', 'html', 'svg', 'css', 'js'];\n/**\n *\n * @param list\n * @return {RegExp}\n */\nconst resolverExp = function(list){\n    return new RegExp('^(.+)(\\\\.)('+list.join('|')+')$');\n};\n/**\n *\n *\n */\nconst resolver = {\n    ext: defaultExtList,\n    exp: resolverExp(defaultExtList),\n    set: function(list){\n        this.ext = list;\n        this.exp = resolverExp(list);\n    },\n    name: function(name){\n        return String(name).replace(this.exp, '$1');\n    },\n    get: function(name){\n        let i = 0, c = false;\n        let e = this.ext;\n        let l = listView;\n        let n = this.name(name);\n        for (; i < e.length; i++) {\n            c = l[[n,e[i]].join('.')];\n            if (c) {\n                break;\n            }\n        }\n        return c;\n    },\n    source: function(name){\n        return this.get(name) || name;\n    }\n}\n\nconst helpers = {\n    /**\n     * @memberOf window\n     * @name $include\n     * @param url\n     * @param data\n     * @returns  {*}\n     */\n    $include: function (url, data) {\n        return view(stringFormat(url,this)).renderHTML(data);\n    },\n    /**\n     * @memberOf window\n     * @name $each\n     * @param object\n     * @param callback\n     * @param context\n     * @returns {*}\n     */\n    $each: function (object, callback, context) {\n        forEach(object, callback, context);\n    },\n    /**\n     * @memberOf window\n     * @name $view\n     * @param tag\n     * @param callback\n     * @returns {*}\n     */\n    $view: function (tag, callback) {\n        let id = uid('node');\n        listAttr[id] = {tag: tag, callback: callback};\n        return stringFormat('<view id=\"{0}\"></view>', [id]);\n    },\n    /**\n     * @memberOf window\n     * @name $prop\n     * @param callback\n     * @returns {string}\n     */\n    $prop: function (callback) {\n        let id = uid('attr');\n        listProp[id] = {selector: ['[', id, ']'].join(''), callback: callback};\n        return ['', id, ''].join(' ');\n    },\n    /**\n     * @memberOf window\n     * @name $control\n     * @param tag\n     * @param control\n     * @param params\n     * @returns {*}\n     */\n    $control: function (tag, control, params) {\n        return this.$view(tag, function (element) {\n            Control.initControl(control, element);\n        });\n    }\n};\n\n/**\n *\n * @param name\n * @return {*}\n */\nfunction view(name) {\n    if (listCache[name]) return listCache[name];\n    listCache[name] = new template(name);\n    return listCache[name];\n}\n\nview.resolver = resolver;\n\n/**\n *\n * @param url\n * @return {*}\n */\nview.preload = function (url) {\n    listPreload[url] = listPreload[url] || $.get(url).then(function (content) {\n        $.extend(listView, content);\n    });\n    return listPreload[url];\n};\n/**\n *\n * @param name\n * @param func\n */\nview.helper = function (name, func) {\n    helpers[name] = func;\n};\n\nmodule.exports = view;","const $ = require('./jquery');\nconst Class = require('./class');\nconst Model = require('./model');\nconst View = require('./view');\nconst Control = require('./control');\nconst Location = require('./location');\n/**\n *\n * @param path\n * @returns {RegExp}\n */\nconst pathToRegexp = function (path) {\n    let result, keys = [], parse = function (_, slsh, format, key, capture, opt) {\n        keys.push({name: key, optional: !!opt});\n        slsh = slsh || '';\n        return '' + (opt ? '' : slsh) + '(?:' + (opt ? slsh : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (opt || '');\n    };\n    path = path.concat('/?');\n    path = path.replace(/\\/\\(/g, '(?:/')\n        .replace(/\\+/g, '__plus__')\n        .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, parse)\n        .replace(/([\\/.])/g, '\\\\$1')\n        .replace(/__plus__/g, '(.+)')\n        .replace(/\\*/g, '(.*)')\n        .replace(/@num/g, '\\\\d+')\n        .replace(/@word/g, '\\\\w+');\n    result = new RegExp('^' + path + '$', '');\n    result.keys = keys;\n    return result;\n};\n/**\n *\n * @param regexp\n * @param path\n * @returns {{}|boolean}\n */\nconst pathMatch = function (regexp, path) {\n    let key;\n    let match = regexp.exec(path);\n    let params = {};\n    if (!match) return false;\n    for (var i = 1, len = match.length; i < len; ++i)\n        if ((key = regexp.keys[i - 1]))\n            params[key.name] = (typeof (match[i]) === 'string') ? decodeURIComponent(match[i]) : match[i];\n    return params;\n};\n/**\n *\n * @type {{hashchange: listener.hashchange}}\n */\nconst listener = {\n    hashchange: function (run) {\n        Location.bind(function () {\n            run(this.path());\n        });\n        if (Location.part(0) === '') {\n            Location.assign('/');\n        } else {\n            run(Location.path());\n        }\n    }\n};\n/**\n * @name RouterQueue\n */\nModel.createModel('router.queue', {\n    init: function(response){\n        this.response = response;\n        this.start();\n    },\n    start: function(){\n        this.list     = {};\n        this.defer    = $.Deferred();\n        this.defer.progress(function(name,response){\n            this.complete(name,response);\n        });\n    },\n    empty: function(){\n        return $.isEmptyObject(this.list);\n    },\n    complete: function(name,value){\n        this.remove(name);\n        this.response.attr(name,value);\n        if( this.empty() ){\n            this.defer.resolve();\n            this.start();\n        }\n    },\n    remove: function(name){\n        if( this.list.hasOwnProperty(name) ) {\n            delete this.list[name];\n        }\n        return this;\n    },\n    reject(name){\n        if( this.list.hasOwnProperty(name) ) {\n            this.list[name].reject();\n        }\n        return this;\n    },\n    then: function(fn){\n        if( this.empty() ) {\n            fn();\n        } else {\n            this.defer.then(fn);\n        }\n        return this;\n    },\n    stop: function(){\n        Object.keys(this.list).forEach(function(name){\n            this.reject(name).remove(name);\n        },this);\n        this.list = {};\n    },\n    add: function(name,defer){\n        let queue = this;\n        queue.list[name] = defer.then(function(content){\n            queue.defer.notifyWith(queue,[name,content]);\n        },function(){\n            queue.defer.notifyWith(queue,[name]);\n        });\n        return queue;\n    }\n});\n/**\n * @name RouterResponse\n */\nModel.createModel('router.response', {\n    init: function(data){\n        this.extend(data);\n        this.__q = Model.getModel('router.queue',this);\n    },\n    queue: function(name,defer){\n        this.__q.add(name,defer);\n        return this;\n    },\n    then: function(callback){\n        this.__q.then(callback);\n        return this;\n    },\n    stop: function () {\n        this.__q.stop();\n        return this;\n    },\n    render: function (wrapper, template, data) {\n        wrapper = document.querySelector(wrapper);\n        template = View(template).render(data);\n        wrapper.innerHTML = '';\n        wrapper.appendChild(template);\n        Control.initControls(wrapper);\n        return wrapper;\n    }\n});\n/**\n * @name RouterRequest\n */\nModel.createModel('router.request', {\n    query: function () {\n        let query = Location.query();\n        this.attr('query',query);\n        return query;\n    },\n    match: function (exp) {\n        return new RegExp(exp).test(this.attr('path'));\n    },\n    model: function () {\n        let args = [].slice.call(arguments);\n        let name = args.shift();\n        let method = args.shift();\n        let model = Model.getModel(name);\n        if (method && typeof (model[method]) === 'function') {\n            return model[method].apply(model, args);\n        }\n        return model;\n    },\n    getChildPath: function(){\n        return '/'.concat(this.alt('params._path_',''));\n    },\n    path: function(value){\n        this.attr('path',value);\n    },\n    params: function(data){\n        data = $.extend({},this.alt('parent',{}),data);\n        this.attr('params',data);\n        this.attr('parent',data);\n    }\n});\n/**\n * @name Route\n */\nClass.createClass('route', {\n    init: function (name) {\n        this.params = {};\n        this.callbacks = [];\n        this.name  = name;\n        this.regex = pathToRegexp(name);\n    },\n    then: function (fn) {\n        this.callbacks.push(fn);\n        return this;\n    },\n    match: function (path) {\n        this.path = path;\n        this.params = pathMatch(this.regex, this.path);\n        return !!this.params;\n    },\n    getCallbacks: function () {\n        return this.callbacks;\n    }\n});\n/**\n * @name Router\n * @property _before_\n * @property _after_\n * @property _routes_\n * @property request\n * @property response\n */\nconst Router = Class.createClass('router', {\n    init: function () {\n        this._before_ = [];\n        this._after_  = [];\n        this._routes_ = {};\n        this.request  = Model.getModel('router.request');\n        this.response = Model.getModel('router.response');\n    },\n    prepare: function(){\n        this.request.attr('path','');\n        this.request.attr('params',{});\n        this.request.attr('parent',{});\n        this.response.attr('data',{});\n        this.response.stop();\n    },\n    route: function (path) {\n        let route = this._routes_[path] || Class.getClass('route', path);\n        this._routes_[path] = route;\n        return route;\n    },\n    use: function(path){\n        return this.route(path.concat('/',':_path_(*)?'));\n    },\n    before: function (fn) {\n        this._before_.push(fn);\n        return this;\n    },\n    after: function (fn) {\n        this._after_.push(fn);\n        return this;\n    },\n    call: function (context, request, response, next) {\n        this.request  = request;\n        this.response = response;\n        this.find(this.request.getChildPath(),next);\n    },\n    apply: function (context, params) {\n        this.call(context,params[0],params[1],params[2]);\n    },\n    process: function (list, complete) {\n        (function next(cx,index) {\n            let params = [];\n            let route  = list[index] || false;\n            if (route === false) return complete && complete.call && complete.call(cx);\n            params.push(cx.request);\n            params.push(cx.response);\n            params.push(function(){\n                cx.response.then(function(){\n                    next(cx,++index);\n                });\n            });\n            list[index].apply(cx,params);\n        })(this,0);\n    },\n    start: function (route,complete) {\n        this.request.path(route.path);\n        this.request.params(route.params);\n        this.request.query();\n        this.process(this._before_, function () {\n            this.process(route.getCallbacks(), function () {\n                this.process(this._after_, complete);\n            });\n        });\n    },\n    find: function (path,complete) {\n        let route,result = Class.getClass('route', path);\n        if( complete === true ){\n            this.prepare();\n        }\n        for (route in this._routes_) {\n            if (this._routes_.hasOwnProperty(route)) {\n                route = this._routes_[route];\n                if (route.match(path)) {\n                    result = route;\n                    break;\n                }\n            }\n        }\n        this.start(result,complete);\n    },\n    listen: function (callback) {\n        if (typeof (callback) === 'string' && typeof (listener[callback]) === 'function')\n            callback = listener[callback];\n        callback((function (that) {\n            return function (path) {\n                that.find(path,true);\n            };\n        })(this));\n        return this;\n    }\n});\n\nmodule.exports = Router;","const $        = jQuery;\nconst Class    = require('./core/class');\nconst Location = require('./core/location');\nconst Control  = require('./core/control');\nconst Model    = require('./core/model');\nconst Locale   = require('./plugins/locale');\nconst Form     = require('./core/form');\nconst Router   = require('./core/router');\nconst View     = require('./core/view');\n/**\n * @memberOf $\n * @property Class\n */\n$.Class   = Class;\n/**\n * @memberOf $\n * @property Model\n */\n$.Model   = Model;\n/**\n * @memberOf $\n * @property Control\n */\n$.Control = Control;\n/**\n * @memberOf $\n * @property Router\n */\n$.Router  = Router;\n/**\n * @memberOf $\n * @property createClass\n * @type {function(*=, *, *): (*)}\n */\n$.createClass = Class.createClass;\n/**\n * @memberOf $\n * @property getClass\n * @type {function(*, *=): (undefined|*)}\n */\n$.getClass = Class.getClass;\n/**\n * @memberOf $\n * @property createModel\n * @type {function(*=, *, *): (*)}\n */\n$.createModel = Model.createModel;\n/**\n * @memberOf $\n * @property getModel\n * @type {function(*, *=): (undefined|*)}\n */\n$.getModel = Model.getModel;\n/**\n *\n * @type {function(*=, *, *): *}\n */\n$.createControl = Control.createControl;\n/**\n * @memberOf $\n * @property initControl\n * @type {function(*, *=): (undefined|*)}\n */\n$.initControl  = Control.initControl;\n/**\n * @memberOf $\n * @property location\n * @type {Object}\n */\n$.location     = Location;\n/**\n * @memberOf $\n * @property locale\n * @type {Object}\n */\n$.locale = Locale;\n/**\n * @memberOf $\n */\n$.deparam = Form.deparam\n/**\n * @memberOf $\n * @property ejs\n * @deprecated\n */\n$.ejs = View;\n/**\n *\n */\n$.fn.extend({\n    setFormData: Form.setFormData,\n    getFormData: Form.getFormData,\n    initControls:function(){\n        this.each(function(index,element){\n            Control.initControls(element);\n        });\n    }\n});\n/**\n *\n * @type {jQuery}\n */\nmodule.exports = $;\n\n"],"names":["classes","init","fnTest","test","toString","superMethod","parent","name","method","result","temp","this","_super","apply","arguments","Class","prototype","instance","params","constructor","proxy","fn","cx","cb","concat","slice","call","Class$5","extend","target","prop","proto","hasOwnProperty","assign","createClass","getClass","data","_class","jquery","window","deparam_1","coerce","spaces","obj","coerce_types","true","false","null","replace","split","forEach","v","val","param","key","decodeURIComponent","cur","i","keys","keys_last","length","shift","isNaN","undefined","Object","push","$","require$$0","deparam","require$$1","skip","prefix","type","event","callbacks","initialize","url","location","normalize","indexOf","join","silent","href","part","index","query","value","path","json","chunk","JSON","parse","e","stringify","callback","bind","on","unbind","splice","host","str","change","location_1","sortObject","sort","reduce","arrayStringify","a","utils","compareArrays","a1","a2","isPlainObject","isArray","object","thisArg","context","require$$2","controls","ATTR","ATTR_SELECTOR","Control","addControlClassName","document","_addProxy_","f","s","p","_event_","args","toArray","element","pushInstance","initElement","create","addClass","arr","Array","initBindings","_bindings_","addBinding","_proxy_cache_","find","el","tag","className","attrs","createElement","attr","clearProxyCache","filter","item","off","unbindAll","timeout","time","_idle_timeout_","clearTimeout","setTimeout","destroy","removeClass","removeData","canBeDestroyed","contains","get","createControl","console","info","sortControls","b","c","querySelectorAll","d","cleanControls","force","control","initControl","initControls","getAttribute","removeAttribute","Model","$data","alt","defaults","ns","child","add","remove","trigger","$update","$change","defer","Deferred","resolve","tmp","pop","len","eachItem","each","props","serialize","Model$2","createModel","getModel","model","cache","Locale","current","file","lang","ajax","then","locale","jQuery","breaker","clean","form","setFormData","parts","match","is","inArray","getFormData","map","serializeArray","field","encodeURIComponent","listPreload","listView","listAttr","listProp","listCache","settings","noMatch","escapes","escaper","htmlEntities","entityRe","RegExp","stringFormat","uid","size","String","random","Math","abs","Date","getTime","parseFloat","toFixed","escapeExpr","string","compile","text","render","matcher","source","escape","interpolate","evaluate","offset","Function","error","template","output","resolver","renderHTML","html","innerHTML","importNode","content","frag","createDocumentFragment","div","firstChild","appendChild","fragment","id","node","getElementById","parentNode","replaceChild","mountNodes","querySelector","selector","mountProps","helpers","defaultExtList","resolverExp","list","ext","exp","set","l","n","$include","view","$each","$view","$prop","$control","preload","helper","func","view_1","View","require$$3","require$$4","Location","require$$5","listener","hashchange","run","response","start","progress","complete","empty","isEmptyObject","reject","stop","queue","notifyWith","__q","wrapper","getChildPath","regex","_","slsh","format","capture","opt","optional","pathToRegexp","regexp","exec","pathMatch","getCallbacks","Router","_before_","_after_","_routes_","request","prepare","route","use","before","after","next","process","listen","that","Form","require$$7","ejs"],"mappings":"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"}