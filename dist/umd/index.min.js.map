{"version":3,"file":"index.min.js","sources":["../../src/core/jquery.js","../../src/core/utils.js","../../src/core/class.js","../../src/core/deparam.js","../../src/core/form.js","../../src/core/location.js","../../src/core/model.js","../../src/core/router.js","../../src/core/control.js","../../src/core/view.js","../../src/utils/storage.js","../../src/utils/cache.js","../../src/index.js"],"sourcesContent":["/**\n * @external jQuery\n * @type {jQuery}\n */\nexport const jQuery = window['jQuery']\n","export function getType(o) {\n    return {}.toString\n        .call(o)\n        .match(/\\s([a-zA-Z]+)/)[1]\n        .toLowerCase()\n}\n/**\n *\n * @param value\n * @return {*}\n */\nexport function isArray(value) {\n    return Array.isArray(value)\n}\n/**\n *\n * @param value\n * @return {boolean}\n */\nexport function isFunction(value) {\n    return typeof value === 'function'\n}\n\n/**\n *\n * @param o\n * @return {boolean}\n */\nexport function isAnyObject(o) {\n    return getType(o) === 'object'\n}\n/**\n *\n * @param value\n * @returns {*}\n */\nexport function isPlainObject(value) {\n    if (isAnyObject(value) === false) return false\n    return (\n        value.constructor === Object &&\n        Object.getPrototypeOf(value) === Object.prototype\n    )\n}\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nexport function forEach(object, callback, thisArg) {\n    let prop,\n        context = thisArg || callback\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n}\n\n/**\n *\n * @param obj\n * @returns {{}}\n */\nexport function sortObject(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (result, key) {\n            result[key] = obj[key]\n            return result\n        }, {})\n}\n\n/**\n *\n * @param a\n * @return {string}\n */\nexport function arrayStringify(a) {\n    return JSON.stringify(a.slice().sort())\n}\n\n/**\n *\n * @param a1\n * @param a2\n * @return {boolean}\n */\nexport function compareArrays(a1, a2) {\n    return arrayStringify(a1) === arrayStringify(a2)\n}\n\n/**\n *\n * @param a\n * @param b\n * @return {boolean}\n */\nexport function arrayEqual(a, b) {\n    if (a === b) return true\n    if (a == null || b == null) return false\n    if (a.length !== b.length) return false\n    for (let i = 0; i < a.length; ++i) {\n        if (a[i] !== b[i]) return false\n    }\n    return true\n}\n\n/**\n *\n * @param path\n * @return {RegExp}\n */\nexport function pathToRegexp(path) {\n    let result,\n        keys = []\n    function parse(_, slash, format, key, capture, opt) {\n        keys.push({ name: key, optional: !!opt })\n        slash = slash || ''\n        return (\n            '' +\n            (opt ? '' : slash) +\n            '(?:' +\n            (opt ? slash : '') +\n            (format || '') +\n            (capture || (format && '([^/.]+?)') || '([^/]+?)') +\n            ')' +\n            (opt || '')\n        )\n    }\n    path = path.concat('/?')\n    path = path\n        .replace(/\\/\\(/g, '(?:/')\n        .replace(/\\+/g, '__plus__')\n        .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, parse)\n        .replace(/([\\/.])/g, '\\\\$1')\n        .replace(/__plus__/g, '(.+)')\n        .replace(/\\*/g, '(.*)')\n        .replace(/@num/g, '\\\\d+')\n        .replace(/@word/g, '\\\\w+')\n    result = new RegExp('^' + path + '$', '')\n    result.keys = keys\n    return result\n}\n/**\n *\n * @param regexp\n * @param path\n * @returns {{}|boolean}\n */\nexport function pathMatch(regexp, path) {\n    let key\n    let match = regexp.exec(path)\n    let params = {}\n    if (!match) return false\n    for (let i = 1, len = match.length; i < len; ++i)\n        if ((key = regexp.keys[i - 1]))\n            params[key.name] =\n                typeof match[i] === 'string'\n                    ? decodeURIComponent(match[i])\n                    : match[i]\n    return params\n}\n","import { isFunction } from './utils'\n\nconst classRegistry = {}\n\nconst initState = { value: false }\n\nconst hasSuper = (fn) => {\n    return !!~fn.toString().indexOf('this._super(')\n}\n\nconst setPrototypeOf = function (o, p) {\n    const setPrototypeOf = Object.setPrototypeOf\n        ? Object.setPrototypeOf.bind(null)\n        : function _setPrototypeOf(o, p) {\n              o.__proto__ = p\n              return o\n          }\n    return setPrototypeOf(o, p)\n}\n\nconst newConstructor = function (parent, params) {\n    const a = [null]\n    a.push.apply(a, params)\n    return Function.bind.apply(parent, a)\n}\n\nconst newInstance = function (parent, params, extend) {\n    const Constructor = newConstructor(parent, params)\n    const instance = new Constructor()\n    if (extend) setPrototypeOf(instance, extend.prototype)\n    return instance\n}\n\nconst superMethod = function (parent, name, method) {\n    return function () {\n        let temp = this._super,\n            result\n        this._super = parent[name]\n        result = method.apply(this, arguments)\n        this._super = temp\n        return result\n    }\n}\n\nconst assign = function (target, instance) {\n    let prop,\n        proto,\n        parent = target.prototype\n    initState.value = true\n    proto = new target()\n    initState.value = false\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (\n                isFunction(parent[prop]) &&\n                isFunction(instance[prop]) &&\n                hasSuper(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent, prop, instance[prop])\n            } else {\n                proto[prop] = instance[prop]\n            }\n        }\n    }\n    return proto\n}\n/**\n * @type {function}\n * @name Class\n * @constructor\n */\nconst Class = function () {}\n\nClass.prototype = {\n    _super() {},\n    instance() {\n        return newInstance(this.constructor, arguments)\n    },\n    proxy(fn) {\n        fn = typeof fn == 'string' ? this[fn] : fn\n        return (function (cx, cb) {\n            return function () {\n                return cb.apply(cx, [this].concat([].slice.call(arguments)))\n            }\n        })(this, fn)\n    },\n}\n\nClass.extend = function extend(instance, name) {\n    /**\n     *\n     * @constructor\n     * @property {Function} init\n     */\n    function Class() {\n        if (!initState.value && this.init) this.init.apply(this, arguments)\n    }\n    Class.prototype = assign(this, instance)\n    Class.prototype.$className = name\n    Class.prototype.constructor = Class\n    Class.extend = extend\n    return Class\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createClass(name, extend, proto) {\n    if (classRegistry[name]) {\n        return classRegistry[name]\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Class\n     */\n    classRegistry[name] = (proto ? classRegistry[extend] : Class).extend(\n        proto ? proto : extend,\n        name\n    )\n    return classRegistry[name]\n}\n\nfunction getClass(name, data) {\n    if (typeof classRegistry[name] !== 'function') return null\n    return new classRegistry[name](data)\n}\n\nexport { Class, getClass, newInstance, createClass }\n","export function deparam(params, coerce, spaces) {\n    let obj = {},\n        coerce_types = { 'true': !0, 'false': !1, 'null': null }\n    if (spaces) params = params.replace(/\\+/g, ' ')\n    params.split('&').forEach(function(v) {\n        let param = v.split('='),\n            key = decodeURIComponent(param[0]),\n            val,\n            cur = obj,\n            i = 0,\n            keys = key.split(']['),\n            keys_last = keys.length - 1\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keys_last])) {\n            keys[keys_last] = keys[keys_last].replace(/]$/, '')\n            keys = keys.shift().split('[').concat(keys)\n            keys_last = keys.length - 1\n        } else {\n            keys_last = 0\n        }\n        if (param.length === 2) {\n            val = decodeURIComponent(param[1])\n            if (coerce) {\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val\n                    : val === 'undefined' ? undefined\n                        : coerce_types[val] !== undefined ? coerce_types[val]\n                            : val\n            }\n            if (keys_last) {\n                for (; i <= keys_last; i++) {\n                    key = keys[i] === '' ? cur.length : keys[i]\n                    cur = cur[key] = i < keys_last\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\n                        : val\n                }\n            } else {\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n                    obj[key].push(val)\n                } else if ({}.hasOwnProperty.call(obj, key)) {\n                    obj[key] = [obj[key], val]\n                } else {\n                    obj[key] = val\n                }\n            }\n\n        } else if (key) {\n            obj[key] = coerce\n                ? undefined\n                : ''\n        }\n    })\n    return obj\n}\n","import { deparam } from './deparam'\nimport { isPlainObject, isArray } from './utils'\n\n/**\n *\n * @type {RegExp}\n */\nconst breaker = /[^\\[\\]]+|\\[\\]$/g\n\n/**\n *\n * @param data\n * @param attr\n * @returns {*|null}\n */\nfunction attr(data, attr) {\n    let i = 0,\n        name = (attr || '').split('.'),\n        prop = name.pop()\n    for (; i < name.length; i++) {\n        if (data && data.hasOwnProperty(name[i])) {\n            data = data[name[i]]\n        } else {\n            break\n        }\n    }\n    return data ? data[prop] : null\n}\n\n/**\n *\n * @param obj\n * @returns {*}\n */\nexport function clean(obj) {\n    let prop\n    for (prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            if (obj[prop].length === 0) {\n                if (isArray(obj)) obj.splice(prop, 1)\n                if (isPlainObject(obj)) delete obj[prop]\n            } else if (typeof obj[prop] == 'object') {\n                clean(obj[prop])\n            }\n        }\n    }\n    return obj\n}\n\n/**\n *\n * @param filter\n * @param coerce\n * @returns {*}\n */\nexport function getFormData(filter, coerce) {\n    let form = this.serializeArray()\n        .map((field) => [field.name, encodeURIComponent(field.value)].join('='))\n        .join('&')\n    let params = deparam(form, coerce, false)\n    return filter === true ? clean(params) : params\n}\n\n/**\n *\n * @param data\n * @returns {setFormData}\n */\nexport function setFormData(data) {\n    this.find('[name]').each((index, element) => {\n        let current = this.find(element)\n        let parts = current.attr('name').match(breaker)\n        let value = attr(data, parts.join('.'))\n        if (value) {\n            if (current.is(':radio')) {\n                if (current.val() === value) {\n                    current.attr('checked', true)\n                }\n            } else if (current.is(':checkbox')) {\n                value = isArray(value) ? value : [value]\n                if (value.indexOf(current.val()) > -1) {\n                    current.attr('checked', true)\n                }\n            } else {\n                current.val(value)\n            }\n        }\n    })\n    return this\n}\n","import { deparam } from './deparam'\n\nlet silenceEvent = false\n\nexport const UrlLocation = {\n    prefix: '#',\n    type: 'hash',\n    event: 'hashchange',\n    callbacks: [],\n    initialize: false,\n    url: function (url, replace) {\n        location[replace === true ? 'replace' : 'assign'](url)\n        return this\n    },\n    getSilence() {\n        return silenceEvent\n    },\n    setSilence(value) {\n        silenceEvent = Boolean(value)\n        return this\n    },\n    normalize(url) {\n        let prefix = String(this.prefix)\n        if (url.indexOf('http') === 0) prefix = ''\n        else if (url.indexOf(prefix) === 0) prefix = ''\n        return [prefix, url].join('')\n    },\n    assign(url, silence) {\n        return this.setSilence(silence).url(this.normalize(url), false)\n    },\n    replace(url, silence) {\n        return this.setSilence(silence).url(this.normalize(url), true)\n    },\n    route(route, silence) {\n        const url = this.normalize(route)\n        if (this.href() !== url) {\n            return this.setSilence(silence).url(url, false)\n        }\n        return this.reload()\n    },\n    reload() {\n        return this.setSilence(false).change()\n    },\n    origin() {\n        return location.origin\n    },\n    host() {\n        return location.host\n    },\n    href() {\n        return location[this.type].slice(1)\n    },\n    indexOf(str, index) {\n        return this.href().indexOf(str) === index\n    },\n    part(index) {\n        return this.href().split('#')[0].split('?')[index] || ''\n    },\n    query(value, replace, silence) {\n        if (arguments.length) {\n            value = value\n                ? [this.part(0), $.param(value)].join('?')\n                : this.part(0)\n            this[replace ? 'replace' : 'assign'](value, silence)\n        } else {\n            return deparam(this.part(1))\n        }\n    },\n    path(value, replace, silence) {\n        if (arguments.length) {\n            value = this.part(1)\n                ? [value, this.part(1)].join('?')\n                : value || '/'\n            this[replace ? 'replace' : 'assign'](value, silence)\n        } else {\n            return this.part(0)\n        }\n    },\n    json(value, replace, silence) {\n        let href = this.href()\n        let chunk = href.split('#')[0].split('?')[1] || '{}'\n        if (arguments.length) {\n            value = value\n                ? [this.part(0), JSON.stringify(value)].join('?')\n                : this.part(0)\n            this[replace ? 'replace' : 'assign'](value, silence)\n        } else {\n            try {\n                chunk = decodeURIComponent(chunk)\n                chunk = JSON.parse(chunk)\n            } catch (e) {\n                chunk = {}\n            }\n            return chunk\n        }\n    },\n    bind(callback) {\n        this.callbacks.push(callback)\n        this.changeHandler = this.changeHandler || this.change.bind(this)\n        if (this.initialize === false) {\n            window.addEventListener(this.event, this.changeHandler)\n            this.initialize = true\n        }\n    },\n    unbind(callback) {\n        this.callbacks.splice(this.callbacks.indexOf(callback), 1)\n    },\n    change() {\n        if (this.getSilence()) return this.setSilence(false)\n        if (this.callbacks.length) {\n            for (const index in this.callbacks) {\n                if (this.callbacks.hasOwnProperty(index)) {\n                    this.callbacks[index].call(this)\n                }\n            }\n        }\n        return this\n    },\n}\n","import { jQuery } from './jquery'\nimport { Class } from './class'\nimport {\n    isArray,\n    isPlainObject,\n    forEach,\n    sortObject,\n    isFunction,\n} from './utils'\n/**\n * @template {string} T\n * @type {{T:Model}}\n */\nconst modelRegistry = {}\n/**\n * @name Model\n * @type {Class|*}\n */\nconst Model = Class.extend({\n    forEach,\n    init(data) {\n        this.extend(data)\n    },\n    extend(data) {\n        if (data) {\n            this.$data = data\n        } else {\n            this.$data = {}\n        }\n    },\n    alt(prop, defaults) {\n        prop = this.attr(prop)\n        return prop === undefined || prop === null || prop === ''\n            ? defaults\n            : prop\n    },\n    defer() {\n        return jQuery.Deferred()\n    },\n    resolve() {\n        return this.defer().resolve(this)\n    },\n    attr(key, value) {\n        let setter = arguments.length > 1\n        let data = this.$data\n        let name = (key || '').split('.')\n        let prop = name.pop()\n        for (let i = 0; i < name.length; i++) {\n            let chunk = name[i]\n            if (data && data.hasOwnProperty(chunk)) {\n                let item = data[chunk]\n                if (isFunction(item.attr)) {\n                    let args = [\n                        key\n                            .split('.')\n                            .slice(i + 1)\n                            .join('.'),\n                    ]\n                    setter && args.push(value)\n                    return item.attr.apply(item, args)\n                } else {\n                    data = data[chunk]\n                }\n            } else {\n                if (setter) {\n                    data = data[chunk] = {}\n                } else {\n                    break\n                }\n            }\n        }\n        if (setter) {\n            data[prop] = value\n        } else {\n            return data ? data[prop] : undefined\n        }\n        return this\n    },\n    eachItem(args) {\n        let name = args[1] ? args[0] : null\n        let callback = args[1] ? args[1] : args[0]\n        let value = name ? this.alt(name, []) : this.$data\n        return {\n            value: sortObject(value),\n            isArray: isArray(value),\n            callback: callback,\n        }\n    },\n    each() {\n        let each = this.eachItem(arguments)\n        this.forEach(\n            each.value,\n            function (value, key) {\n                each.callback(this.instance(value), value, key)\n            },\n            this\n        )\n    },\n    serialize() {\n        const context = this\n        return (function callback(data) {\n            const result = isArray(data) ? [] : {}\n            for (let prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    let value = data[prop]\n                    if (value === context) {\n                        continue\n                    }\n                    if (value && isFunction(value.serialize)) {\n                        result[prop] = value.serialize()\n                    } else {\n                        if (isArray(value) || isPlainObject(value)) {\n                            result[prop] = callback(value)\n                        } else {\n                            result[prop] = value\n                        }\n                    }\n                }\n            }\n            return result\n        })(this.$data)\n    },\n    stringify: function () {\n        return JSON.stringify(this.serialize())\n    },\n})\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createModel(name, extend, proto) {\n    if (modelRegistry[name]) {\n        return modelRegistry[name]\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Model\n     */\n    modelRegistry[name] = (proto ? modelRegistry[extend] : Model).extend(\n        proto ? proto : extend,\n        name\n    )\n    return modelRegistry[name]\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param {object} [data]\n */\nfunction getModel(name, data) {\n    if (typeof modelRegistry[name] !== 'function') return\n    return new modelRegistry[name](data)\n}\n\nexport { Model, getModel, createModel }\n","import { createClass, getClass } from './class'\nimport { createModel, getModel } from './model'\nimport { UrlLocation } from './location'\nimport { pathToRegexp, pathMatch } from './utils'\n\n/**\n *\n * @type {{hashchange: function(run: function)}}\n */\nconst listener = {\n    hashchange(run) {\n        UrlLocation.bind(function () {\n            run(UrlLocation.path())\n        })\n        if (UrlLocation.part(0) === '') {\n            UrlLocation.assign('/')\n        } else {\n            run(UrlLocation.path())\n        }\n    },\n}\n/**\n * @name RouterQueue\n */\ncreateModel('router.queue', {\n    init(response) {\n        this.callbacks = []\n        this.response = response\n        this.reset()\n    },\n    reset() {\n        this.list = {}\n        this.callbacks.length = 0\n    },\n    has(name) {\n        return this.list.hasOwnProperty(name)\n    },\n    empty() {\n        return Object.keys(this.list).length === 0\n    },\n    complete(name, value) {\n        this.remove(name)\n        this.response.attr(name, value)\n        if (this.empty()) {\n            this.callbacks.forEach((callback) => {\n                this.callbacks.splice(this.callbacks.indexOf(callback), 1)\n                callback()\n            })\n        }\n    },\n    remove(name) {\n        if (this.has(name)) {\n            delete this.list[name]\n        }\n        return this\n    },\n    then(fn) {\n        if (this.empty()) {\n            fn()\n        } else {\n            this.callbacks.push(fn)\n        }\n        return this\n    },\n    stop() {\n        Object.keys(this.list).forEach((name) => {\n            this.remove(name)\n        })\n        this.list = {}\n        this.callbacks.length = 0\n    },\n    notify(name, response) {\n        if (this.has(name)) {\n            this.complete(name, response)\n        }\n    },\n    add(name, promise) {\n        this.list[name] = promise.then(\n            (content) => {\n                this.notify(name, content)\n            },\n            () => {\n                this.notify(name)\n            }\n        )\n        return this\n    },\n})\n/**\n * @name RouterResponse\n */\ncreateModel('router.response', {\n    init(data) {\n        this.extend(data)\n        this.defer = getModel('router.queue', this)\n    },\n    queue(name, defer) {\n        this.defer.add(name, defer)\n        return this\n    },\n    then(callback) {\n        this.defer.then(callback)\n        return this\n    },\n    stop() {\n        this.defer.stop()\n        return this\n    },\n    render(wrapper, template, data) {\n        console.info('render function call', wrapper, template, data)\n    },\n})\n/**\n * @name RouterRequest\n */\ncreateModel('router.request', {\n    query() {\n        let query = UrlLocation.query()\n        this.attr('query', query)\n        return query\n    },\n    match(exp) {\n        return new RegExp(exp).test(this.attr('path'))\n    },\n    model() {\n        let args = [].slice.call(arguments)\n        let name = args.shift()\n        let method = args.shift()\n        let model = getModel(name)\n        if (method && typeof model[method] === 'function') {\n            return model[method].apply(model, args)\n        }\n        return model\n    },\n    getChildPath() {\n        return '/'.concat(this.alt('params._path_', ''))\n    },\n    path(value) {\n        this.attr('path', value)\n    },\n    params(data) {\n        data = Object.assign({}, this.alt('parent', {}), data || {})\n        this.attr('params', data)\n        this.attr('parent', data)\n    },\n})\n/**\n * @name Route\n */\ncreateClass('route', {\n    init(name) {\n        this.params = {}\n        this.callbacks = []\n        this.name = name\n        this.regex = pathToRegexp(name)\n    },\n    then(fn) {\n        this.callbacks.push(fn)\n        return this\n    },\n    match(path) {\n        this.path = path\n        this.params = pathMatch(this.regex, this.path)\n        return !!this.params\n    },\n    getCallbacks() {\n        return this.callbacks\n    },\n})\n/**\n * @name Router\n * @property _before_\n * @property _after_\n * @property _routes_\n * @property request\n * @property response\n */\nconst Router = createClass('router', {\n    init() {\n        this._before_ = []\n        this._after_ = []\n        this._routes_ = {}\n        this.request = getModel('router.request')\n        this.response = getModel('router.response')\n    },\n    prepare() {\n        this.request.attr('path', '')\n        this.request.attr('params', {})\n        this.request.attr('parent', {})\n        this.response.attr('data', {})\n        this.response.stop()\n    },\n    route(path) {\n        let route = this._routes_[path] || getClass('route', path)\n        this._routes_[path] = route\n        return route\n    },\n    use(path) {\n        return this.route(path.concat('/', ':_path_(*)?'))\n    },\n    before(fn) {\n        this._before_.push(fn)\n        return this\n    },\n    after(fn) {\n        this._after_.push(fn)\n        return this\n    },\n    call(context, request, response, next) {\n        this.request = request\n        this.response = response\n        this.find(this.request.getChildPath(), next)\n    },\n    apply(context, params) {\n        this.call(context, params[0], params[1], params[2])\n    },\n    process(list, complete) {\n        ;(function next(cx, index) {\n            let params = []\n            let route = list[index] || false\n            if (route === false)\n                return complete && complete.call && complete.call(cx)\n            params.push(cx.request)\n            params.push(cx.response)\n            params.push(function () {\n                cx.response.then(function () {\n                    next(cx, ++index)\n                })\n            })\n            list[index].apply(cx, params)\n        })(this, 0)\n    },\n    start(route, complete) {\n        this.request.path(route.path)\n        this.request.params(route.params)\n        this.request.query()\n        this.process(this._before_, function () {\n            this.process(route.getCallbacks(), function () {\n                this.process(this._after_, complete)\n            })\n        })\n    },\n    find(path, complete) {\n        let route,\n            result = getClass('route', path)\n        if (complete === true) {\n            this.prepare()\n        }\n        for (route in this._routes_) {\n            if (this._routes_.hasOwnProperty(route)) {\n                route = this._routes_[route]\n                if (route.match(path)) {\n                    result = route\n                    break\n                }\n            }\n        }\n        this.start(result, complete)\n    },\n    listen(callback) {\n        if (\n            typeof callback === 'string' &&\n            typeof listener[callback] === 'function'\n        )\n            callback = listener[callback]\n        callback(\n            (function (that) {\n                return function (path) {\n                    that.find(path, true)\n                }\n            })(this)\n        )\n        return this\n    },\n})\n\nexport { Router }\n","import { jQuery } from './jquery'\nimport { Class, newInstance } from './class'\nimport { arrayEqual, forEach } from './utils'\n\n/**\n *\n * @type {{string:Control}}\n */\nconst controlRegistry = {}\nconst controls = []\nconst ATTR = 'control'\nconst ATTR_SELECTOR = '[' + ATTR + ']'\n\n/**\n * @name Control\n * @property {jQuery} element\n * @property {jQuery} window\n * @property {jQuery} document\n * @type {Class|*}\n */\nconst Control = Class.extend({\n    window: jQuery(window),\n    document: jQuery(document),\n    /**\n     *\n     * @param f\n     * @param s\n     * @param p\n     * @returns {*}\n     * @private\n     */\n    _addProxy_(f, s, p) {\n        if (p.length === f) p[f - 1] = this.proxy(p[f - 1])\n        if (p.length === s) p[s - 1] = this.proxy(p[s - 1])\n        return p\n    },\n    /**\n     *\n     * @param type\n     * @param params\n     * @returns Control\n     * @private\n     */\n    _event_(type, params) {\n        let args = this.toArray(params)\n        args = this._addProxy_(2, 3, args)\n        this.element[type].apply(this.element, args)\n        return this\n    },\n    /**\n     * @constructor\n     * @param element\n     */\n    init(element) {\n        this.pushInstance()\n        this.initElement(element)\n        this.create(element)\n    },\n    /**\n     *\n     */\n    pushInstance() {\n        controls.push(this)\n    },\n    /**\n     *\n     * @param element\n     */\n    initElement(element) {\n        this.element = jQuery(element)\n    },\n    /**\n     *\n     * @param element\n     */\n    create(element) {},\n    /**\n     *\n     * @param arr\n     * @returns {*[]}\n     */\n    toArray(arr) {\n        return Array.prototype.slice.call(arr)\n    },\n    /**\n     *\n     */\n    initBindings() {\n        if (!this._bindings_) {\n            this._bindings_ = []\n        }\n    },\n    /**\n     *\n     * @param args\n     */\n    addBinding(args) {\n        this.initBindings()\n        this._bindings_.push([].concat(args))\n    },\n    /**\n     *\n     * @param fn\n     * @returns {*}\n     */\n    proxy(fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {}\n        if (!this._proxy_cache_[fn]) {\n            this._proxy_cache_[fn] = this._super(fn)\n        }\n        return this._proxy_cache_[fn]\n    },\n    /**\n     * @returns {jQuery}\n     */\n    find() {\n        return this.element.find.apply(this.element, arguments)\n    },\n    /**\n     *\n     * @param {string} tag\n     * @param {string} [className]\n     * @param {Object<string,string>} [attrs]\n     * @returns {jQuery}\n     */\n    el(tag, className, attrs) {\n        const el = jQuery(document.createElement(tag))\n        if (className) el.addClass(className)\n        if (attrs) el.attr(attrs)\n        return el\n    },\n    clearProxyCache() {\n        forEach(\n            this._proxy_cache_,\n            function (value, prop) {\n                delete this._proxy_cache_[prop]\n            },\n            this\n        )\n    },\n    bind() {\n        let args = this.toArray(arguments)\n        this.addBinding(args)\n        args = this._addProxy_(3, 4, args)\n        let el = this[args[0]] || jQuery(args[0])\n        el.on.apply(el, args.slice(1))\n        return this\n    },\n    unbind() {\n        let args = this.toArray(arguments)\n        this.initBindings()\n        this._bindings_ = this._bindings_.filter(\n            (item) => arrayEqual(item, args) === false\n        )\n        args = this._addProxy_(3, 4, args)\n        let el = this[args[0]] || jQuery(args[0])\n        el.off.apply(el, args.slice(1))\n        return this\n    },\n    unbindAll() {\n        this.initBindings()\n        this._bindings_.forEach(function (value) {\n            this.unbind.apply(this, value)\n        }, this)\n        this._bindings_ = []\n        return this\n    },\n    on() {\n        this._event_('on', arguments)\n        return this\n    },\n    off() {\n        this._event_('off', arguments)\n        return this\n    },\n    delay(callback, time) {\n        callback = this.proxy(callback, true)\n        const params = [callback, time].concat(Array.from(arguments).slice(2))\n        if (!this._delay_map_) this._delay_map_ = new WeakMap()\n        if (!this._delay_set_) this._delay_set_ = new Set()\n        if (this._delay_map_.has(callback)) {\n            clearTimeout(this._delay_map_.get(callback))\n        }\n        const delay = setTimeout.apply(null, params)\n        this._delay_set_.add(delay)\n        this._delay_map_.set(callback, delay)\n        return this\n    },\n    clearDelayList() {\n        if (!this._delay_set_) return true\n        this._delay_set_.forEach((delay) => {\n            clearTimeout(delay)\n        })\n        this._delay_set_ = null\n        this._delay_map_ = null\n    },\n    destroy() {\n        this.off()\n        this.unbindAll()\n        this.clearProxyCache()\n        this.clearDelayList()\n        this.element.removeData()\n    },\n    canBeDestroyed() {\n        return jQuery.contains(document, this.element.get(0)) === false\n    },\n})\n\nfunction sortControls(a, b) {\n    let c = a.querySelectorAll(ATTR_SELECTOR).length,\n        d = b.querySelectorAll(ATTR_SELECTOR).length\n    if ((c && !d) || c > d) return 1\n    if ((!c && d) || c < d) return -1\n    return 0\n}\n\nfunction cleanControls(force) {\n    controls.forEach(function (control, index) {\n        if (control.canBeDestroyed() || force) {\n            control.destroy()\n            controls.splice(index, 1)\n        }\n    })\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createControl(name, extend, proto) {\n    if (controlRegistry[name]) {\n        console.info('control with name [%s] is already exist', name)\n        return controlRegistry[name]\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Control\n     */\n    controlRegistry[name] = (proto ? controlRegistry[extend] : Control).extend(\n        proto ? proto : extend,\n        name\n    )\n    return controlRegistry[name]\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @returns {controlRegistry[T] & Control}\n */\n\nfunction initControl(name) {\n    const params = [].slice.call(arguments, 1)\n    if (typeof controlRegistry[name] !== 'function') return\n    return newInstance(controlRegistry[name], params)\n}\n\nfunction initControls(element) {\n    cleanControls()\n    Array.prototype.slice\n        .call(element.querySelectorAll(ATTR_SELECTOR))\n        .sort(sortControls)\n        .forEach(function (item) {\n            item.getAttribute(ATTR)\n                .split(',')\n                .forEach(function (name) {\n                    initControl(name, item)\n                })\n            item.removeAttribute(ATTR)\n        })\n}\n\nexport {\n    createControl,\n    sortControls,\n    cleanControls,\n    initControl,\n    initControls,\n    Control,\n}\n","import { jQuery } from './jquery'\nimport { Class } from './class'\nimport { initControl } from './control'\n\nconst listPreload = {}\nconst listView = {}\nconst listAttr = {}\nconst listProp = {}\nconst listCache = {}\n\nconst settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g,\n    variable: false,\n}\n\nconst noMatch = /(.)^/\n\nconst escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029',\n}\n\nconst escaper = /[\\\\'\\r\\n\\t\\u2028\\u2029]/g\n\nconst htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n}\n\nconst entityRe = new RegExp('[&<>\"\\']', 'g')\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nconst forEach = function (object, callback, thisArg) {\n    let prop,\n        context = thisArg || callback\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n}\n/**\n *\n * @param value\n * @param params\n * @return {string}\n */\nconst stringFormat = function (value, params) {\n    return (value || '').replace(/{(.+?)}/g, function (match, prop) {\n        return typeof params[prop] != 'undefined' ? params[prop] : match\n    })\n}\n\n/**\n *\n * @return {string}\n */\nconst uid = function (ns) {\n    let size = 1000000\n    let length = String(size).length - 1\n    let random = Math.abs(Math.random()) * size\n    let time = String(new Date().getTime()).match(/.{1,7}/g)\n    let result = parseFloat(String(random)).toFixed(length).split('.')\n    return [ns].concat(result).concat(time).join('-')\n}\n/**\n *\n * @param element\n */\nconst mountNodes = function (element) {\n    forEach(listAttr, function (data, id, item, node) {\n        if ((item = element.getElementById(id)) === null) return false\n        node = document.createElement(data.tag)\n        item.parentNode && item.parentNode.replaceChild(node, item)\n        if (typeof data.callback === 'function') {\n            data.callback(node)\n        }\n        delete listAttr[id]\n    })\n}\n/**\n *\n * @param element\n */\nconst mountProps = function (element) {\n    forEach(listProp, function (item, attr) {\n        let node = element.querySelector(item.selector)\n        if (node === null) return\n        node.removeAttribute(attr)\n        if (typeof item.callback === 'function') {\n            item.callback(node)\n        }\n        delete listProp[attr]\n    })\n}\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeExpr = function (string) {\n    if (string == null) return ''\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match]\n    })\n}\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeString = function (string) {\n    if (string == null) return ''\n    return ('' + string).replace(escaper, function (match) {\n        return '\\\\' + escapes[match]\n    })\n}\n/**\n *\n * @param text\n * @param name\n * @return {function(*=): string}\n */\nconst compile = function (text, name) {\n    let render\n    let matcher = new RegExp(\n        [\n            (settings.escape || noMatch).source,\n            (settings.interpolate || noMatch).source,\n            (settings.evaluate || noMatch).source,\n        ].join('|') + '|$',\n        'g'\n    )\n    let index = 0\n    let source = \"__p+='\"\n    ;(text || '').replace(\n        matcher,\n        function (match, escape, interpolate, evaluate, offset) {\n            source += escapeString(text.slice(index, offset))\n            if (escape)\n                source +=\n                    \"'\\n+((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\"\n            if (interpolate)\n                source += \"'\\n+((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\"\n            if (evaluate) source += \"';\\n\" + evaluate + \";\\n__p+='\"\n            index = offset + match.length\n            return match\n        }\n    )\n    source += \"';\"\n    source = 'with(obj||{}){\\n' + source + '}'\n    source =\n        \"var __t,__p='',__j=[].join,print=function(){__p+=__j.call(arguments,'');};\" +\n        source +\n        'return __p;\\n//# sourceURL=[' +\n        name +\n        ']'\n    try {\n        render = new Function('obj', 'escapeExpr', source)\n    } catch (e) {\n        console.error(e)\n    }\n    let template = function (data) {\n        let output = ''\n        try {\n            output = render && render.call(this, data, escapeExpr)\n        } catch (e) {\n            console.error(e)\n        }\n        return output\n    }\n    template.source = 'function(obj){' + source + '}'\n    return template\n}\n\n/**\n *\n * @param html\n * @return {DocumentFragment}\n */\nconst fragment = function (html) {\n    let template = document.createElement('template')\n    if ('content' in template) {\n        template.innerHTML = html\n        return document.importNode(template.content, true)\n    }\n    let frag = document.createDocumentFragment()\n    let div = document.createElement('div')\n    div.innerHTML = html\n    while (div.firstChild) {\n        frag.appendChild(div.firstChild)\n    }\n    return frag\n}\n\n/**\n * @name Template\n * @type {Class|*}\n */\nconst template = Class.extend({\n    init: function (source, name) {\n        this.source = resolver.source(source)\n        this.compile(this.source, name)\n    },\n    compile: function (source, name) {\n        this.output = compile(source, name)\n        return this\n    },\n    renderHTML: function (data) {\n        data = this.extend(data)\n        return this.output.call(data, data)\n    },\n    render: function (data) {\n        let element = fragment(this.renderHTML(data))\n        mountNodes(element)\n        mountProps(element)\n        return element\n    },\n    extend: function (data) {\n        return jQuery.extend({}, this, data || {}, helpers)\n    },\n})\n/**\n *\n * @type {string[]}\n */\nconst defaultExtList = ['ejs', 'html', 'svg', 'css', 'js']\n/**\n *\n * @param list\n * @return {RegExp}\n */\nconst resolverExp = function (list) {\n    return new RegExp('^(.+)(\\\\.)(' + list.join('|') + ')$')\n}\n/**\n *\n *\n */\nconst resolver = {\n    ext: defaultExtList,\n    exp: resolverExp(defaultExtList),\n    set: function (list) {\n        this.ext = list\n        this.exp = resolverExp(list)\n    },\n    name: function (name) {\n        return String(name).replace(this.exp, '$1')\n    },\n    get: function (name) {\n        let i = 0,\n            c = false\n        let e = this.ext\n        let l = listView\n        let n = this.name(name)\n        for (; i < e.length; i++) {\n            c = l[[n, e[i]].join('.')]\n            if (c) {\n                break\n            }\n        }\n        return c\n    },\n    source: function (name) {\n        return this.get(name) || name\n    },\n}\n\nconst helpers = {\n    /**\n     * @memberOf window\n     * @name $include\n     * @param url\n     * @param data\n     * @returns  {*}\n     */\n    $include: function (url, data) {\n        return view(stringFormat(url, this)).renderHTML(data)\n    },\n    /**\n     * @memberOf window\n     * @name $each\n     * @param object\n     * @param callback\n     * @param context\n     * @returns {*}\n     */\n    $each: function (object, callback, context) {\n        forEach(object, callback, context)\n    },\n    /**\n     * @memberOf window\n     * @name $view\n     * @param tag\n     * @param callback\n     * @returns {*}\n     */\n    $view: function (tag, callback) {\n        let id = uid('node')\n        listAttr[id] = { tag: tag, callback: callback }\n        return stringFormat('<view id=\"{0}\"></view>', [id])\n    },\n    /**\n     * @memberOf window\n     * @name $prop\n     * @param callback\n     * @returns {string}\n     */\n    $prop: function (callback) {\n        let id = uid('attr')\n        listProp[id] = { selector: ['[', id, ']'].join(''), callback: callback }\n        return ['', id, ''].join(' ')\n    },\n    /**\n     * @memberOf window\n     * @name $control\n     * @param tag\n     * @param control\n     * @param params\n     * @returns {*}\n     */\n    $control: function (tag, control, params) {\n        return this.$view(tag, function (element) {\n            initControl(control, element)\n        })\n    },\n}\n\n/**\n *\n * @param name\n * @return {*}\n */\nfunction view(name) {\n    if (listCache[name]) return listCache[name]\n    listCache[name] = new template(name)\n    return listCache[name]\n}\n\nview.resolver = resolver\n\n/**\n *\n * @param url\n * @return {*}\n */\nview.preload = function (url) {\n    listPreload[url] =\n        listPreload[url] ||\n        jQuery.get(url).then(function (content) {\n            jQuery.extend(listView, content)\n        })\n    return listPreload[url]\n}\n/**\n *\n * @param name\n * @param func\n */\nview.helper = function (name, func) {\n    helpers[name] = func\n}\n\nexport { view }\n","function BackupStorage() {}\n\nBackupStorage.prototype = {\n    getItem: function (key) {\n        return this[key];\n    },\n    setItem: function (key, value) {\n        this[key] = value;\n    },\n    removeItem: function (key) {\n        delete this[key];\n    },\n    clear: function () {\n        for (let key in this) {\n            if (this.hasOwnProperty(key)) {\n                delete this[key];\n            }\n        }\n    }\n};\n\nconst backupStorage = new BackupStorage()\n\nconst StorageProvider = ('localStorage' in window && window['localStorage']) ? window['localStorage'] : backupStorage;\n\nexport {\n    StorageProvider\n}","import { StorageProvider } from './storage'\n\nexport const StorageCache = {\n    storageProvider: StorageProvider,\n    set: function (key, data, ttl) {\n        ttl = new Date().getTime() + ttl * 1000 * 60\n        try {\n            StorageProvider.setItem(['cache', key, 'ttl'].join(':'), ttl)\n            StorageProvider.setItem(\n                ['cache', key].join(':'),\n                JSON.stringify(data)\n            )\n        } catch (e) {\n            StorageProvider.clear()\n        }\n        return this\n    },\n    expire: function (key) {\n        StorageProvider.removeItem(['cache', key, 'ttl'].join(':'))\n        StorageProvider.removeItem(['cache', key].join(':'))\n        return this\n    },\n    exist: function (key) {\n        let ttl = Storage.getItem(['cache', key, 'ttl'].join(':'))\n        return !!(ttl && ttl > new Date().getTime())\n    },\n    get: function (key) {\n        return JSON.parse(Storage.getItem(['cache', key].join(':')))\n    },\n    list: function () {\n        let key,\n            list = []\n        for (key in StorageProvider) {\n            if (StorageProvider.hasOwnProperty(key)) {\n                if (\n                    key.indexOf('cache:') !== -1 &&\n                    key.indexOf(':ttl') === -1\n                ) {\n                    list.push(key.slice(6))\n                }\n            }\n        }\n        return list\n    },\n    clear: function (force) {\n        this.list().forEach(\n            function (key) {\n                ;(force === true || this.exist(key) === false) &&\n                    this.expire(key)\n            }.bind(this)\n        )\n    },\n}\n","import { jQuery } from './core/jquery'\nimport { pathToRegexp, pathMatch } from './core/utils'\nimport { Class, createClass, getClass } from './core/class'\nimport { getFormData, setFormData } from './core/form'\nimport { UrlLocation } from './core/location'\nimport { createModel, getModel, Model } from './core/model'\nimport { deparam } from './core/deparam'\nimport { Router } from './core/router'\nimport { view } from './core/view'\nimport { StorageCache } from './utils/cache'\nimport {\n    cleanControls,\n    Control,\n    createControl,\n    initControl,\n    initControls,\n} from './core/control'\n\njQuery.storageCache = Cache\njQuery.Class = Class\njQuery.Model = Model\njQuery.Control = Control\njQuery.Router = Router\njQuery.createClass = createClass\njQuery.getClass = getClass\njQuery.createModel = createModel\njQuery.getModel = getModel\njQuery.createControl = createControl\njQuery.initControl = initControl\njQuery.cleanControls = cleanControls\njQuery.location = UrlLocation\njQuery.deparam = deparam\njQuery.ejs = view\n\njQuery.fn.setFormData = setFormData\njQuery.fn.getFormData = getFormData\njQuery.fn.initControls = function () {\n    this.each(function (index, element) {\n        initControls(element)\n    })\n}\n\nconst config = (function () {})({})\n\nexport { jQuery as $ }\n\nexport {\n    deparam,\n    Class,\n    UrlLocation,\n    Model,\n    Control,\n    Router,\n    StorageCache,\n    pathToRegexp,\n    pathMatch,\n    createClass,\n    getModel,\n    getClass,\n    cleanControls,\n    createControl,\n    createModel,\n    initControl,\n}\n"],"names":["jQuery","window","isArray","value","Array","isFunction","isPlainObject","o","toString","call","match","toLowerCase","getType","constructor","Object","getPrototypeOf","prototype","forEach","object","callback","thisArg","prop","context","hasOwnProperty","pathToRegexp","path","result","keys","concat","replace","_","slash","format","key","capture","opt","push","name","optional","RegExp","pathMatch","regexp","exec","params","i","len","length","decodeURIComponent","classRegistry","initState","newInstance","parent","extend","Constructor","a","apply","Function","bind","newConstructor","instance","p","setPrototypeOf","__proto__","superMethod","method","temp","this","_super","arguments","Class","createClass","proto","getClass","data","deparam","coerce","spaces","obj","coerce_types","true","false","null","split","v","val","param","cur","keys_last","test","shift","isNaN","undefined","proxy","fn","cx","cb","slice","init","target","indexOf","assign","$className","breaker","clean","splice","silenceEvent","UrlLocation","prefix","type","event","callbacks","initialize","url","location","getSilence","setSilence","Boolean","normalize","String","join","silence","route","href","reload","change","origin","host","str","index","part","query","$","json","chunk","JSON","parse","e","stringify","changeHandler","addEventListener","unbind","modelRegistry","Model","$data","alt","defaults","attr","defer","Deferred","resolve","setter","pop","item","args","eachItem","sort","reduce","each","serialize","createModel","getModel","listener","hashchange","run","response","reset","list","has","empty","complete","remove","then","stop","notify","add","promise","content","queue","render","wrapper","template","console","info","exp","model","getChildPath","regex","getCallbacks","Router","_before_","_after_","_routes_","request","prepare","use","before","after","next","find","process","start","listen","that","controlRegistry","controls","ATTR","ATTR_SELECTOR","Control","document","_addProxy_","f","s","_event_","toArray","element","pushInstance","initElement","create","arr","initBindings","_bindings_","addBinding","_proxy_cache_","el","tag","className","attrs","createElement","addClass","clearProxyCache","on","filter","b","arrayEqual","off","unbindAll","delay","time","from","_delay_map_","WeakMap","_delay_set_","Set","clearTimeout","get","setTimeout","set","clearDelayList","destroy","removeData","canBeDestroyed","contains","sortControls","c","querySelectorAll","d","cleanControls","force","control","createControl","initControl","listPreload","listView","listAttr","listProp","listCache","settings","noMatch","escapes","escaper","htmlEntities","entityRe","stringFormat","uid","ns","size","random","Math","abs","Date","getTime","parseFloat","toFixed","escapeExpr","string","compile","text","matcher","source","escape","interpolate","evaluate","offset","error","output","resolver","renderHTML","html","innerHTML","importNode","frag","createDocumentFragment","div","firstChild","appendChild","fragment","id","node","getElementById","parentNode","replaceChild","mountNodes","querySelector","selector","removeAttribute","mountProps","helpers","defaultExtList","resolverExp","ext","l","n","$include","view","$each","$view","$prop","$control","BackupStorage","preload","helper","func","getItem","setItem","removeItem","clear","backupStorage","StorageProvider","StorageCache","storageProvider","ttl","expire","exist","Storage","storageCache","Cache","ejs","setFormData","current","parts","is","getFormData","serializeArray","map","field","encodeURIComponent","initControls","getAttribute"],"mappings":"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"}