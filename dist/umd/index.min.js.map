{"version":3,"file":"index.min.js","sources":["../../src/core/jquery.js","../../src/core/utils.js","../../src/core/class.js","../../src/core/deparam.js","../../src/core/form.js","../../src/core/location.js","../../src/core/model.js","../../src/core/control.js","../../src/core/view.js","../../src/core/router.js","../../src/utils/storage.js","../../src/utils/cache.js","../../src/index.js"],"sourcesContent":["/**\n * @external jQuery\n * @type function\n */\nconst jQuery = window['jQuery']\n\n\nexport default jQuery\n","/**\n *\n * @param value\n * @return {*}\n */\nexport function isArray(value) {\n    return Array.isArray(value);\n}\n\n/**\n *\n * @param value\n * @return {boolean}\n */\nexport function isFunction(value){\n    return typeof value === 'function'\n}\n/**\n *\n * @param value\n * @returns {*}\n */\n\nexport function isPlainObject(value) {\n    if (!value || toString.call( value ) !== \"[object Object]\" ) {\n        return false;\n    }\n    const proto = Object.getPrototypeOf( value );\n    if (!proto) return true;\n    const func = Object.hasOwnProperty.call(proto,'constructor') && proto.constructor;\n    return typeof func === \"function\" && Object.hasOwnProperty.toString.call(func) === Object.hasOwnProperty.toString.call(Object);\n}\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nexport function forEach(object, callback, thisArg) {\n    let prop, context = thisArg || callback;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n}\n\n/**\n *\n * @param obj\n * @returns {{}}\n */\nexport function sortObject(obj) {\n    return Object.keys(obj).sort().reduce(function (result, key) {\n        result[key] = obj[key];\n        return result;\n    }, {});\n}\n\n/**\n *\n * @param a\n * @return {string}\n */\nexport function arrayStringify(a){\n    return JSON.stringify(a.slice().sort());\n}\n\n/**\n *\n * @param a1\n * @param a2\n * @return {boolean}\n */\nexport function compareArrays(a1,a2){\n    return arrayStringify(a1) === arrayStringify(a2);\n}\n\n/**\n *\n * @param path\n * @return {RegExp}\n */\nexport function pathToRegexp(path) {\n    let result, keys = [];\n    function parse(_, slash, format, key, capture, opt) {\n        keys.push({name: key, optional: !!opt});\n        slash = slash || '';\n        return '' + (opt ? '' : slash) + '(?:' + (opt ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (opt || '');\n    }\n    path = path.concat('/?');\n    path = path.replace(/\\/\\(/g, '(?:/')\n        .replace(/\\+/g, '__plus__')\n        .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, parse)\n        .replace(/([\\/.])/g, '\\\\$1')\n        .replace(/__plus__/g, '(.+)')\n        .replace(/\\*/g, '(.*)')\n        .replace(/@num/g, '\\\\d+')\n        .replace(/@word/g, '\\\\w+');\n    result = new RegExp('^' + path + '$', '');\n    result.keys = keys;\n    return result;\n}\n/**\n *\n * @param regexp\n * @param path\n * @returns {{}|boolean}\n */\nexport function pathMatch(regexp, path) {\n    let key;\n    let match = regexp.exec(path);\n    let params = {};\n    if (!match) return false;\n    for (let i = 1, len = match.length; i < len; ++i)\n        if ((key = regexp.keys[i - 1]))\n            params[key.name] = (typeof (match[i]) === 'string') ? decodeURIComponent(match[i]) : match[i];\n    return params;\n}\n","import { isFunction } from './utils'\n\nconst classRegistry = {}\n\nconst initState = { value: false }\n\nconst hasSuper = (fn) => {\n    return !!~fn.toString().indexOf('this._super(')\n}\n\nconst setPrototypeOf = function (o, p) {\n    const setPrototypeOf = Object.setPrototypeOf\n        ? Object.setPrototypeOf.bind(null)\n        : function _setPrototypeOf(o, p) {\n              o.__proto__ = p\n              return o\n          }\n    return setPrototypeOf(o, p)\n}\n\nconst newConstructor = function (parent, params) {\n    const a = [null]\n    a.push.apply(a, params)\n    return Function.bind.apply(parent, a)\n}\n\nconst newInstance = function (parent, params, extend) {\n    const Constructor = newConstructor(parent, params)\n    const instance = new Constructor()\n    if (extend) setPrototypeOf(instance, extend.prototype)\n    return instance\n}\n\nconst superMethod = function (parent, name, method) {\n    return function () {\n        let temp = this._super,\n            result\n        this._super = parent[name]\n        result = method.apply(this, arguments)\n        this._super = temp\n        return result\n    }\n}\n\nconst assign = function (target, instance) {\n    let prop,\n        proto,\n        parent = target.prototype\n    initState.value = true\n    proto = new target()\n    initState.value = false\n    for (prop in instance) {\n        if (instance.hasOwnProperty(prop)) {\n            if (\n                isFunction(parent[prop]) &&\n                isFunction(instance[prop]) &&\n                hasSuper(instance[prop])\n            ) {\n                proto[prop] = superMethod(parent, prop, instance[prop])\n            } else {\n                proto[prop] = instance[prop]\n            }\n        }\n    }\n    return proto\n}\n/**\n * @type {function}\n * @name Class\n * @constructor\n */\nconst Class = function () {}\n\nClass.prototype = {\n    _super() {},\n    instance() {\n        return newInstance(this.constructor, arguments)\n    },\n    proxy(fn) {\n        fn = typeof fn == 'string' ? this[fn] : fn\n        return (function (cx, cb) {\n            return function () {\n                return cb.apply(cx, [this].concat([].slice.call(arguments)))\n            }\n        })(this, fn)\n    },\n}\n\nClass.extend = function extend(instance, name) {\n    /**\n     *\n     * @constructor\n     * @property {Function} init\n     */\n    function Class() {\n        if (!initState.value && this.init) this.init.apply(this, arguments)\n    }\n\n    Class.prototype = assign(this, instance)\n    Class.prototype.name = name\n    Class.prototype.constructor = Class\n    Class.extend = extend\n    return Class\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createClass(name, extend, proto) {\n    if (classRegistry[name]) {\n        return classRegistry[name]\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Class\n     */\n    classRegistry[name] = (proto ? classRegistry[extend] : Class).extend(\n        proto ? proto : extend,\n        name\n    )\n    return classRegistry[name]\n}\n\nfunction getClass(name, data) {\n    if (typeof classRegistry[name] !== 'function') return null\n    return new classRegistry[name](data)\n}\n\nexport { Class, getClass, newInstance, createClass }\n","export function deparam(params, coerce, spaces) {\n    let obj = {},\n        coerce_types = { 'true': !0, 'false': !1, 'null': null }\n    if (spaces) params = params.replace(/\\+/g, ' ')\n    params.split('&').forEach(function(v) {\n        let param = v.split('='),\n            key = decodeURIComponent(param[0]),\n            val,\n            cur = obj,\n            i = 0,\n            keys = key.split(']['),\n            keys_last = keys.length - 1\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keys_last])) {\n            keys[keys_last] = keys[keys_last].replace(/]$/, '')\n            keys = keys.shift().split('[').concat(keys)\n            keys_last = keys.length - 1\n        } else {\n            keys_last = 0\n        }\n        if (param.length === 2) {\n            val = decodeURIComponent(param[1])\n            if (coerce) {\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val\n                    : val === 'undefined' ? undefined\n                        : coerce_types[val] !== undefined ? coerce_types[val]\n                            : val\n            }\n            if (keys_last) {\n                for (; i <= keys_last; i++) {\n                    key = keys[i] === '' ? cur.length : keys[i]\n                    cur = cur[key] = i < keys_last\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\n                        : val\n                }\n            } else {\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n                    obj[key].push(val)\n                } else if ({}.hasOwnProperty.call(obj, key)) {\n                    obj[key] = [obj[key], val]\n                } else {\n                    obj[key] = val\n                }\n            }\n\n        } else if (key) {\n            obj[key] = coerce\n                ? undefined\n                : ''\n        }\n    })\n    return obj\n}\n","import {deparam} from \"./deparam\";\nimport {isPlainObject,isArray,isFunction} from './utils'\n/**\n *\n * @type {function(*, *=, *=): {}}\n */\n\n/**\n *\n * @type {RegExp}\n */\nconst breaker = /[^\\[\\]]+|\\[\\]$/g;\n\n/**\n *\n * @param data\n * @param attr\n * @returns {*|null}\n */\nfunction attr(data, attr) {\n    let i = 0,\n        name = (attr || '').split('.'),\n        prop = name.pop();\n    for (; i < name.length; i++) {\n        if (data && data.hasOwnProperty(name[i])) {\n            data = data[name[i]];\n        } else {\n            break;\n        }\n    }\n    return data ? data[prop] : null;\n}\n\n/**\n *\n * @param obj\n * @returns {*}\n */\nexport function clean(obj) {\n    let prop;\n    for (prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            if (obj[prop].length === 0) {\n                if(isArray(obj)) obj.splice(prop, 1);\n                if(isPlainObject(obj)) delete obj[prop];\n            } else if (typeof (obj[prop]) == 'object') {\n                clean(obj[prop]);\n            }\n        }\n    }\n    return obj;\n}\n\n/**\n *\n * @param filter\n * @param coerce\n * @returns {*}\n */\nexport function getFormData(filter,coerce){\n    let form   = this.serializeArray().map(function(field){\n        return [field.name, encodeURIComponent(field.value)].join('=')\n    }).join('&');\n    let params = deparam(form, coerce, false);\n    return filter === true ? clean(params) : params;\n}\n\n/**\n *\n * @param data\n * @returns {setFormData}\n */\nexport function setFormData( data ) {\n    this.find('[name]').each(function(index,element){\n        let current = $(element);\n        let parts = current.attr('name').match(breaker);\n        let value = attr(data,parts.join('.'));\n        if (value) {\n            if (current.is(\":radio\")) {\n                if (current.val() === value) {\n                    current.attr(\"checked\", true);\n                }\n            } else if (current.is(\":checkbox\")) {\n                value = isArray(value) ? value : [value];\n                if (value.indexOf(current.val()) > -1) {\n                    current.attr(\"checked\", true);\n                }\n            } else {\n                current.val(value);\n            }\n        }\n    });\n    return this;\n}\n\n","import { deparam } from './deparam'\n\nlet skip = false\n\nexport const UrlLocation = {\n    prefix: '#',\n    type: 'hash',\n    event: 'hashchange',\n    callbacks: [],\n    initialize: false,\n    url: function(url, replace) {\n        location[replace === true ? 'replace' : 'assign'](url)\n        return this\n    },\n    normalize: function(url) {\n        let prefix = this.prefix\n        if (url.indexOf('http') === 0) prefix = ''\n        else if (url.indexOf('#') === 0) prefix = ''\n        return [prefix, url].join('')\n    },\n    assign: function(url, silent) {\n        skip = silent\n        return this.url(this.normalize(url))\n    },\n    replace: function(url, silent) {\n        skip = silent\n        return this.url(this.normalize(url), true)\n    },\n    href: function() {\n        return location[this.type].slice(1)\n    },\n    part: function(index) {\n        return this.href().split('#')[0].split('?')[index] || ''\n    },\n    query: function(value, replace, silent) {\n        if (arguments.length) {\n            value = value ? [this.part(0), $.param(value)].join('?') : this.part(0)\n            this[replace ? 'replace' : 'assign'](value, silent)\n        } else {\n            return deparam(this.part(1))\n        }\n    },\n    path: function(value, replace, silent) {\n        if (arguments.length) {\n            value = this.part(1) ? [value, this.part(1)].join('?') : value || '/'\n            this[replace ? 'replace' : 'assign'](value, silent)\n        } else {\n            return this.part(0)\n        }\n    },\n    json: function(value, replace, silent) {\n        let href = this.href()\n        let chunk = href.split('#')[0].split('?')[1] || '{}'\n        if (arguments.length) {\n            value = value ? [this.part(0), JSON.stringify(value)].join('?') : this.part(0)\n            this[replace ? 'replace' : 'assign'](value, silent)\n        } else {\n            try {\n                chunk = decodeURIComponent(chunk)\n                chunk = JSON.parse(chunk)\n            } catch (e) {\n                chunk = {}\n            }\n            return chunk\n        }\n    },\n    bind: function(callback) {\n        this.callbacks.push(callback)\n        this.changeHandler = this.changeHandler || this.change.bind(this)\n        if (this.initialize === false) {\n            window.addEventListener(this.event, this.changeHandler)\n            this.initialize = true\n        }\n    },\n    unbind: function(callback) {\n        this.callbacks.splice(this.callbacks.indexOf(callback), 1)\n    },\n    host: function() {\n        return location.host\n    },\n    indexOf: function(str, index) {\n        return this.href().indexOf(str) === index\n    },\n    change: function() {\n        let index\n        if (skip === true) {\n            return skip = false\n        }\n        if (this.callbacks.length) {\n            for (index in this.callbacks) {\n                if (this.callbacks.hasOwnProperty(index)) {\n                    this.callbacks[index].call(this)\n                }\n            }\n        }\n    }\n}\n","import $ from './jquery'\nimport {Class} from './class'\nimport {isArray, isPlainObject, forEach, sortObject, isFunction} from './utils'\n/**\n * @template {string} T\n * @type {{T:Model}}\n */\nconst modelRegistry = {};\n\n/**\n * @name Model\n * @type {Class|*}\n */\nconst Model = Class.extend({\n    init: function (data) {\n        this.extend(data);\n    },\n    extend: function (data) {\n        if (data) {\n            this.$data = data;\n        } else {\n            this.$data = {};\n        }\n    },\n    alt: function (prop, defaults) {\n        prop = this.attr(prop);\n        return typeof (prop) === 'undefined' ? defaults : prop;\n    },\n    ns: function (name) {\n        let context = this;\n        let chunk = name.split('.');\n        let child = this.attr(chunk.slice(0, -1).join('.'));\n        if (child instanceof Model) {\n            context = child;\n        }\n        return [context, chunk.slice(-1).join('.')];\n    },\n    on: function (name, callback) {\n        let ns = this.ns(name);\n        $.event.add(ns[0], ns[1], callback);\n        return this;\n    },\n    off: function (name, callback) {\n        let ns = this.ns(name);\n        $.event.remove(ns[0], ns[1], callback);\n        return this;\n    },\n    trigger: function (name, data) {\n        let ns = this.ns(name);\n        $.event.trigger(ns[1], data, ns[0], true);\n        return this;\n    },\n    $update: function () {\n\n    },\n    $change: function () {\n\n    },\n    defer: function () {\n        return $.Deferred();\n    },\n    resolve: function () {\n        return this.defer().resolve(this);\n    },\n    attr: function (key, value) {\n        let i = 0, tmp,\n            data = this.$data,\n            name = (key || '').split('.'),\n            prop = name.pop(),\n            len = arguments.length;\n        for (; i < name.length; i++) {\n            if (data && data.hasOwnProperty(name[i])) {\n                if (data[name[i]] && isFunction(data[name[i]]['attr'])) {\n                    tmp = [key.split('.').slice(i + 1).join('.')];\n                    len === 2 && tmp.push(value);\n                    return data[name[i]].attr.apply(data[name[i]], tmp);\n                } else {\n                    data = data[name[i]];\n                }\n            } else {\n                if (len === 2) {\n                    data = (data[name[i]] = {});\n                } else {\n                    break;\n                }\n            }\n        }\n        if (len === 1) {\n            return data ? data[prop] : undefined;\n        }\n        if (len === 2) {\n            tmp = data[prop];\n            data[prop] = value;\n            this.$change(key, value, tmp);\n        }\n        return this;\n    },\n    eachItem: function (args) {\n        let name = args[1] ? args[0] : null;\n        let callback = args[1] ? args[1] : args[0];\n        let value = name ? this.alt(name, []) : this.$data;\n        return {\n            value: sortObject(value),\n            isArray: isArray(value),\n            callback: callback\n        }\n    },\n    each: function () {\n        let each = this.eachItem(arguments);\n        forEach(each.value, function (value, key) {\n            each.callback(this.instance(value), value, key);\n        }, this);\n    },\n    attrs: function (props) {\n        this.$data = (function callback(data, parent, path) {\n            let prop\n            for (prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    if (parent[prop] && isFunction(parent[prop]['attrs'])) {\n                        parent[prop].attrs(data[prop], prop);\n                    } else {\n                        if (isArray(data[prop]) || isPlainObject(data[prop])) {\n                            if (isArray(data[prop])) parent[prop] = parent[prop] || [];\n                            if (isPlainObject(data[prop])) parent[prop] = parent[prop] || {};\n                            callback.call(this, data[prop], parent[prop], prop);\n                        } else {\n                            parent[prop] = data[prop];\n                        }\n                    }\n                    this.$change(path ? path.concat('.', prop) : prop, data[prop], parent[prop]);\n                }\n            }\n            return parent;\n        }).call(this, props, this.$data);\n        this.$update(props, this.$data);\n        return this;\n    },\n    serialize: function () {\n        return (function callback(result, data) {\n            let prop;\n            for (prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    if (data[prop] && isFunction(data[prop]['serialize'])) {\n                        result[prop] = data[prop].serialize();\n                    } else {\n                        if (isArray(data[prop]) || isPlainObject(data[prop])) {\n                            if (isArray(data[prop])) result[prop] = [];\n                            if (isPlainObject(data[prop])) result[prop] = {};\n                            callback.call(this, result[prop], data[prop]);\n                        } else {\n                            result[prop] = data[prop]\n                        }\n                    }\n                }\n            }\n            return result;\n        }).call(this, isArray(this.$data) ? [] : {}, this.$data);\n    },\n    stringify: function () {\n        return JSON.stringify(this.serialize());\n    }\n});\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createModel(name, extend, proto) {\n    if (modelRegistry[name]) {\n        return modelRegistry[name];\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Model\n     */\n    modelRegistry[name] = (proto ? modelRegistry[extend] : Model).extend(proto ? proto : extend, name);\n    return modelRegistry[name];\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param {object} [data]\n */\nfunction getModel(name, data) {\n    if (typeof (modelRegistry[name]) !== 'function') return;\n    return new modelRegistry[name](data);\n}\n\nexport {\n    Model,\n    getModel,\n    createModel,\n}\n","import $ from './jquery'\nimport {Class, newInstance} from './class'\nimport {compareArrays, forEach} from './utils'\n\n/**\n *\n * @type {{string:Control}}\n */\nconst controlRegistry  = {};\nconst controls = [];\nconst ATTR = 'control';\nconst ATTR_SELECTOR = '['+ ATTR +']';\n\n/**\n * @name Control\n * @property {jQuery} element\n * @property {jQuery} window\n * @property {jQuery} document\n * @type {Class|*}\n */\nconst Control = Class.extend({\n    addControlClassName: true,\n    window: $(window),\n    document: $(document),\n    /**\n     *\n     * @param f\n     * @param s\n     * @param p\n     * @returns {*}\n     * @private\n     */\n    _addProxy_:function(f,s,p){\n        if (p.length === f) p[f-1] = this.proxy(p[f-1]);\n        if (p.length === s) p[s-1] = this.proxy(p[s-1]);\n        return p;\n    },\n    /**\n     *\n     * @param type\n     * @param params\n     * @returns Control\n     * @private\n     */\n    _event_:function(type,params){\n        let args = this.toArray(params);\n        args = this._addProxy_(2,3,args);\n        this.element[type].apply(this.element, args);\n        return this;\n    },\n    /**\n     * @constructor\n     * @param element\n     */\n    init: function (element) {\n        this.pushInstance();\n        this.initElement(element);\n        this.create(element);\n    },\n    /**\n     *\n     */\n    pushInstance: function () {\n        controls.push(this);\n    },\n    /**\n     *\n     * @param element\n     */\n    initElement: function (element) {\n        this.element = $(element);\n        if( this.addControlClassName === true ){\n            this.element.addClass(this.name.split('.').join('-'));\n        }\n    },\n    /**\n     *\n     * @param element\n     */\n    create: function (element) {\n\n    },\n    /**\n     *\n     * @param arr\n     * @returns {*[]}\n     */\n    toArray: function (arr) {\n        return Array.prototype.slice.call(arr);\n    },\n    /**\n     *\n     */\n    initBindings: function () {\n        if (!this._bindings_){\n            this._bindings_ = [];\n        }\n    },\n    /**\n     *\n     * @param args\n     */\n    addBinding: function (args) {\n        this.initBindings();\n        this._bindings_.push([].concat(args));\n    },\n    /**\n     *\n     * @param fn\n     * @returns {*}\n     */\n    proxy: function (fn) {\n        if (!this._proxy_cache_) this._proxy_cache_ = {};\n        if (!this._proxy_cache_[fn]) {\n            this._proxy_cache_[fn] = this._super(fn);\n        }\n        return this._proxy_cache_[fn];\n    },\n    /**\n     * @returns {jQuery.prototype}\n     */\n    find: function () {\n        return this.element.find.apply(this.element, arguments);\n    },\n    /**\n     *\n     * @param tag\n     * @param className\n     * @param attrs\n     * @returns {jQuery.prototype}\n     */\n    el: function (tag, className, attrs) {\n        tag = $(document.createElement(tag));\n        if (className) tag.addClass(className);\n        if (attrs) tag.attr(attrs);\n        return tag;\n    },\n    clearProxyCache: function () {\n        forEach(this._proxy_cache_,function(value,prop){\n            delete this._proxy_cache_[prop];\n        },this)\n    },\n    bind: function () {\n        let el, args = this.toArray(arguments);\n        this.addBinding(args);\n        args = this._addProxy_(3,4,args);\n        el = this[args[0]] || $(args[0]);\n        el.on.apply(el, args.slice(1));\n        return this;\n    },\n    unbind: function () {\n        let el, args = this.toArray(arguments);\n        this.initBindings();\n        this._bindings_ = this._bindings_.filter(function(item){\n            return compareArrays(item,args) === false;\n        },this);\n        args = this._addProxy_(3,4,args);\n        el = this[args[0]] || $(args[0]);\n        el.off.apply(el, args.slice(1));\n        return this;\n    },\n    unbindAll: function () {\n        this.initBindings();\n        this._bindings_.forEach(function (value) {\n            this.unbind.apply(this,value);\n        },this);\n        this._bindings_ = [];\n        return this;\n    },\n    on: function () {\n        this._event_('on',arguments);\n        return this;\n    },\n    off: function () {\n        this._event_('off',arguments);\n        return this;\n    },\n    timeout: function (callback, time) {\n        if (!this._idle_timeout_) this._idle_timeout_ = {};\n        clearTimeout(this._idle_timeout_[callback]);\n        delete this._idle_timeout_[callback];\n        if( time === false ) return this;\n        this._idle_timeout_[callback] = setTimeout(this.proxy(callback), time);\n        return this;\n    },\n    destroy: function () {\n        this.off();\n        this.unbindAll();\n        this.clearProxyCache();\n        this.element.removeClass(this.name.split('.').join('-'));\n        this.element.removeData();\n    },\n    canBeDestroyed: function () {\n        return $.contains(document, this.element.get(0)) === false\n    }\n});\n\nfunction sortControls(a, b) {\n    let c = a.querySelectorAll(ATTR_SELECTOR).length,\n        d = b.querySelectorAll(ATTR_SELECTOR).length;\n    if ((c && !d) || (c > d)) return 1;\n    if ((!c && d) || (c < d)) return -1;\n    return 0;\n}\n\nfunction cleanControls(force) {\n    controls.forEach(function (control,index) {\n        if (control.canBeDestroyed() || force) {\n            control.destroy();\n            controls.splice(index,1)\n        }\n    });\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @param extend\n * @param [proto]\n */\nfunction createControl(name, extend, proto) {\n    if (controlRegistry[name]) {\n        console.info('control with name [%s] is already exist', name);\n        return controlRegistry[name];\n    }\n    /**\n     * @type {extend & proto}\n     * @extends Control\n     */\n    controlRegistry[name] = (proto ? controlRegistry[extend] : Control).extend(proto ? proto : extend, name);\n    return controlRegistry[name];\n}\n\n/**\n * @template {string} T\n * @param {T} name\n * @returns {controlRegistry[T] & Control}\n */\n\nfunction initControl(name) {\n    const params = [].slice.call(arguments,1)\n    if (typeof(controlRegistry[name]) !== 'function') return;\n    return newInstance(controlRegistry[name],params);\n}\n\nfunction initControls(element){\n    cleanControls();\n    Array.prototype.slice.call(element.querySelectorAll(ATTR_SELECTOR))\n        .sort(sortControls)\n        .forEach(function (item) {\n            item.getAttribute(ATTR).split(',').forEach(function (name) {\n                initControl(name, item);\n            });\n            item.removeAttribute(ATTR);\n        });\n}\n\nexport {\n    createControl,\n    sortControls,\n    cleanControls,\n    initControl,\n    initControls,\n    Control,\n}\n","import $ from './jquery'\nimport {Class} from './class'\nimport {initControl} from './control'\n\nconst listPreload = {};\nconst listView = {};\nconst listAttr = {};\nconst listProp = {};\nconst listCache = {};\n\nconst settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g,\n    variable: false\n};\n\nconst noMatch = /(.)^/;\n\nconst escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n};\n\nconst escaper = /[\\\\'\\r\\n\\t\\u2028\\u2029]/g;\n\nconst htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n};\n\nconst entityRe = new RegExp('[&<>\"\\']', 'g');\n/**\n *\n * @param object\n * @param callback\n * @param thisArg\n */\nconst forEach = function (object, callback, thisArg) {\n    let prop, context = thisArg || callback;\n    for (prop in object) {\n        if (object.hasOwnProperty(prop)) {\n            callback.call(context, object[prop], prop)\n        }\n    }\n};\n/**\n *\n * @param value\n * @param params\n * @return {string}\n */\nconst stringFormat = function (value, params) {\n    return (value || '').replace(/{(.+?)}/g, function (match, prop) {\n        return typeof (params[prop]) != 'undefined' ? params[prop] : match;\n    });\n};\n\n/**\n *\n * @return {string}\n */\nconst uid = function (ns) {\n    let size = 1000000;\n    let length = String(size).length - 1;\n    let random = Math.abs(Math.random()) * size;\n    let time = String(new Date().getTime()).match(/.{1,7}/g);\n    let result = parseFloat(String(random)).toFixed(length).split('.');\n    return [ns].concat(result).concat(time).join('-');\n};\n/**\n *\n * @param element\n */\nconst mountNodes = function (element) {\n    forEach(listAttr, function (data, id, item, node) {\n        if ((item = element.getElementById(id)) === null) return false;\n        node = document.createElement(data.tag);\n        item.parentNode && item.parentNode.replaceChild(node, item);\n        if (typeof (data.callback) === 'function') {\n            data.callback(node);\n        }\n        delete listAttr[id];\n    })\n};\n/**\n *\n * @param element\n */\nconst mountProps = function (element) {\n    forEach(listProp, function (item, attr) {\n        let node = element.querySelector(item.selector);\n        if (node === null) return;\n        node.removeAttribute(attr);\n        if (typeof (item.callback) === 'function') {\n            item.callback(node);\n        }\n        delete listProp[attr];\n    });\n};\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeExpr = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n        return htmlEntities[match];\n    });\n};\n/**\n *\n * @param string\n * @return {string}\n */\nconst escapeString = function (string) {\n    if (string == null) return '';\n    return ('' + string).replace(escaper, function (match) {\n        return '\\\\' + escapes[match];\n    });\n};\n/**\n *\n * @param text\n * @param name\n * @return {function(*=): string}\n */\nconst compile = function (text, name) {\n    let render;\n    let matcher = new RegExp([\n        (settings.escape || noMatch).source,\n        (settings.interpolate || noMatch).source,\n        (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n    let index = 0;\n    let source = \"__p+='\";\n    (text || '').replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n        source += escapeString(text.slice(index, offset));\n        if (escape) source += \"'\\n+((__t=(\" + escape + \"))==null?'':escapeExpr(__t))+\\n'\";\n        if (interpolate) source += \"'\\n+((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n        if (evaluate) source += \"';\\n\" + evaluate + \";\\n__p+='\";\n        index = offset + match.length;\n        return match;\n    });\n    source += \"';\";\n    source = \"with(obj||{}){\\n\" + source + \"}\";\n    source = \"var __t,__p='',__j=[].join,print=function(){__p+=__j.call(arguments,'');};\"\n        + source + \"return __p;\\n//# sourceURL=[\" + name + \"]\";\n    try {\n        render = new Function('obj', 'escapeExpr', source);\n    } catch (e) {\n        console.error(e);\n    }\n    let template = function (data) {\n        let output = '';\n        try {\n            output = render && render.call(this, data, escapeExpr);\n        } catch (e) {\n            console.error(e);\n        }\n        return output;\n    };\n    template.source = 'function(obj){' + source + '}';\n    return template;\n};\n\n/**\n *\n * @param html\n * @return {DocumentFragment}\n */\nconst fragment = function (html) {\n    let template = document.createElement('template');\n    if ('content' in template) {\n        template.innerHTML = html;\n        return document.importNode(template.content, true);\n    }\n    let frag = document.createDocumentFragment();\n    let div = document.createElement('div');\n    div.innerHTML = html;\n    while (div.firstChild) {\n        frag.appendChild(div.firstChild);\n    }\n    return frag;\n}\n\n\n/**\n * @name Template\n * @type {Class|*}\n */\nconst template = Class.extend({\n    init: function (source, name) {\n        this.source = resolver.source(source);\n        this.compile(this.source, name);\n    },\n    compile: function (source, name) {\n        this.output = compile(source, name);\n        return this;\n    },\n    renderHTML: function (data) {\n        data = this.extend(data);\n        return this.output.call(data, data);\n    },\n    render: function (data) {\n        let element = fragment(this.renderHTML(data));\n        mountNodes(element);\n        mountProps(element);\n        return element;\n    },\n    extend: function (data) {\n        return $.extend({}, this, data || {}, helpers);\n    }\n});\n/**\n *\n * @type {string[]}\n */\nconst defaultExtList = ['ejs', 'html', 'svg', 'css', 'js'];\n/**\n *\n * @param list\n * @return {RegExp}\n */\nconst resolverExp = function (list) {\n    return new RegExp('^(.+)(\\\\.)(' + list.join('|') + ')$');\n};\n/**\n *\n *\n */\nconst resolver = {\n    ext: defaultExtList,\n    exp: resolverExp(defaultExtList),\n    set: function (list) {\n        this.ext = list;\n        this.exp = resolverExp(list);\n    },\n    name: function (name) {\n        return String(name).replace(this.exp, '$1');\n    },\n    get: function (name) {\n        let i = 0, c = false;\n        let e = this.ext;\n        let l = listView;\n        let n = this.name(name);\n        for (; i < e.length; i++) {\n            c = l[[n, e[i]].join('.')];\n            if (c) {\n                break;\n            }\n        }\n        return c;\n    },\n    source: function (name) {\n        return this.get(name) || name;\n    }\n}\n\nconst helpers = {\n    /**\n     * @memberOf window\n     * @name $include\n     * @param url\n     * @param data\n     * @returns  {*}\n     */\n    $include: function (url, data) {\n        return view(stringFormat(url, this)).renderHTML(data);\n    },\n    /**\n     * @memberOf window\n     * @name $each\n     * @param object\n     * @param callback\n     * @param context\n     * @returns {*}\n     */\n    $each: function (object, callback, context) {\n        forEach(object, callback, context);\n    },\n    /**\n     * @memberOf window\n     * @name $view\n     * @param tag\n     * @param callback\n     * @returns {*}\n     */\n    $view: function (tag, callback) {\n        let id = uid('node');\n        listAttr[id] = {tag: tag, callback: callback};\n        return stringFormat('<view id=\"{0}\"></view>', [id]);\n    },\n    /**\n     * @memberOf window\n     * @name $prop\n     * @param callback\n     * @returns {string}\n     */\n    $prop: function (callback) {\n        let id = uid('attr');\n        listProp[id] = {selector: ['[', id, ']'].join(''), callback: callback};\n        return ['', id, ''].join(' ');\n    },\n    /**\n     * @memberOf window\n     * @name $control\n     * @param tag\n     * @param control\n     * @param params\n     * @returns {*}\n     */\n    $control: function (tag, control, params) {\n        return this.$view(tag, function (element) {\n            initControl(control, element);\n        });\n    }\n};\n\n/**\n *\n * @param name\n * @return {*}\n */\nfunction view(name) {\n    if (listCache[name]) return listCache[name];\n    listCache[name] = new template(name);\n    return listCache[name];\n}\n\nview.resolver = resolver;\n\n/**\n *\n * @param url\n * @return {*}\n */\nview.preload = function (url) {\n    listPreload[url] = listPreload[url] || $.get(url).then(function (content) {\n        $.extend(listView, content);\n    });\n    return listPreload[url];\n};\n/**\n *\n * @param name\n * @param func\n */\nview.helper = function (name, func) {\n    helpers[name] = func;\n};\n\nexport {view}","import {createClass, getClass} from \"./class\";\nimport {createModel,getModel} from \"./model\";\nimport {view} from './view'\nimport {initControls} from \"./control\";\nimport {UrlLocation} from \"./location\";\nimport {pathToRegexp,pathMatch} from './utils'\n\n/**\n *\n * @type {{hashchange: listener.hashchange}}\n */\nconst listener = {\n    hashchange: function (run) {\n        UrlLocation.bind(function () {\n            run(UrlLocation.path());\n        });\n        if (UrlLocation.part(0) === '') {\n            UrlLocation.assign('/');\n        } else {\n            run(UrlLocation.path());\n        }\n    }\n};\n/**\n * @name RouterQueue\n */\ncreateModel('router.queue', {\n    init(response) {\n        this.callbacks = []\n        this.response = response\n        this.reset()\n    },\n    reset() {\n        this.list = {}\n        this.callbacks.length = 0\n    },\n    has(name) {\n        return this.list.hasOwnProperty(name)\n    },\n    empty() {\n        return Object.keys(this.list).length === 0\n    },\n    complete(name, value) {\n        this.remove(name)\n        this.response.attr(name, value)\n        if (this.empty()) {\n            this.callbacks.forEach((callback) => {\n                this.callbacks.splice(this.callbacks.indexOf(callback), 1)\n                callback()\n            })\n        }\n    },\n    remove(name) {\n        if (this.has(name)) {\n            delete this.list[name]\n        }\n        return this\n    },\n    then(fn) {\n        if (this.empty()) {\n            fn()\n        } else {\n            this.callbacks.push(fn)\n        }\n        return this\n    },\n    stop() {\n        Object.keys(this.list).forEach((name) => {\n            this.remove(name)\n        })\n        this.list = {}\n        this.callbacks.length = 0\n    },\n    notify(name, response) {\n        if (this.has(name)) {\n            this.complete(name, response)\n        }\n    },\n    add(name, promise) {\n        this.list[name] = promise.then(\n            (content) => {\n                this.notify(name, content)\n            },\n            () => {\n                this.notify(name)\n            }\n        )\n        return this\n    },\n});\n/**\n * @name RouterResponse\n */\ncreateModel('router.response', {\n    init: function(data){\n        this.extend(data);\n        this.defer = getModel('router.queue',this);\n    },\n    queue: function(name,defer){\n        this.defer.add(name,defer);\n        return this;\n    },\n    then: function(callback){\n        this.defer.then(callback);\n        return this;\n    },\n    stop: function () {\n        this.defer.stop();\n        return this;\n    },\n    render: function (wrapper, template, data) {\n        wrapper = document.querySelector(wrapper);\n        template = view(template).render(data);\n        wrapper.innerHTML = '';\n        wrapper.appendChild(template);\n        initControls(wrapper);\n        return wrapper;\n    }\n});\n/**\n * @name RouterRequest\n */\ncreateModel('router.request', {\n    query: function () {\n        let query = UrlLocation.query();\n        this.attr('query',query);\n        return query;\n    },\n    match: function (exp) {\n        return new RegExp(exp).test(this.attr('path'));\n    },\n    model: function () {\n        let args = [].slice.call(arguments);\n        let name = args.shift();\n        let method = args.shift();\n        let model = getModel(name);\n        if (method && typeof (model[method]) === 'function') {\n            return model[method].apply(model, args);\n        }\n        return model;\n    },\n    getChildPath: function(){\n        return '/'.concat(this.alt('params._path_',''));\n    },\n    path: function(value){\n        this.attr('path',value);\n    },\n    params: function(data){\n        data = Object.assign({},this.alt('parent',{}),data || {});\n        this.attr('params',data);\n        this.attr('parent',data);\n    }\n});\n/**\n * @name Route\n */\ncreateClass('route', {\n    init: function (name) {\n        this.params = {};\n        this.callbacks = [];\n        this.name  = name;\n        this.regex = pathToRegexp(name);\n    },\n    then: function (fn) {\n        this.callbacks.push(fn);\n        return this;\n    },\n    match: function (path) {\n        this.path = path;\n        this.params = pathMatch(this.regex, this.path);\n        return !!this.params;\n    },\n    getCallbacks: function () {\n        return this.callbacks;\n    }\n});\n/**\n * @name Router\n * @property _before_\n * @property _after_\n * @property _routes_\n * @property request\n * @property response\n */\nconst Router = createClass('router', {\n    init: function () {\n        this._before_ = [];\n        this._after_  = [];\n        this._routes_ = {};\n        this.request  = getModel('router.request');\n        this.response = getModel('router.response');\n    },\n    prepare: function(){\n        this.request.attr('path','');\n        this.request.attr('params',{});\n        this.request.attr('parent',{});\n        this.response.attr('data',{});\n        this.response.stop();\n    },\n    route: function (path) {\n        let route = this._routes_[path] || getClass('route', path);\n        this._routes_[path] = route;\n        return route;\n    },\n    use: function(path){\n        return this.route(path.concat('/',':_path_(*)?'));\n    },\n    before: function (fn) {\n        this._before_.push(fn);\n        return this;\n    },\n    after: function (fn) {\n        this._after_.push(fn);\n        return this;\n    },\n    call: function (context, request, response, next) {\n        this.request  = request;\n        this.response = response;\n        this.find(this.request.getChildPath(),next);\n    },\n    apply: function (context, params) {\n        this.call(context,params[0],params[1],params[2]);\n    },\n    process: function (list, complete) {\n        (function next(cx,index) {\n            let params = [];\n            let route  = list[index] || false;\n            if (route === false) return complete && complete.call && complete.call(cx);\n            params.push(cx.request);\n            params.push(cx.response);\n            params.push(function(){\n                cx.response.then(function(){\n                    next(cx,++index);\n                });\n            });\n            list[index].apply(cx,params);\n        })(this,0);\n    },\n    start: function (route,complete) {\n        this.request.path(route.path);\n        this.request.params(route.params);\n        this.request.query();\n        this.process(this._before_, function () {\n            this.process(route.getCallbacks(), function () {\n                this.process(this._after_, complete);\n            });\n        });\n    },\n    find: function (path,complete) {\n        let route,result = getClass('route', path);\n        if( complete === true ){\n            this.prepare();\n        }\n        for (route in this._routes_) {\n            if (this._routes_.hasOwnProperty(route)) {\n                route = this._routes_[route];\n                if (route.match(path)) {\n                    result = route;\n                    break;\n                }\n            }\n        }\n        this.start(result,complete);\n    },\n    listen: function (callback) {\n        if (typeof (callback) === 'string' && typeof (listener[callback]) === 'function')\n            callback = listener[callback];\n        callback((function (that) {\n            return function (path) {\n                that.find(path,true);\n            };\n        })(this));\n        return this;\n    }\n});\n\nexport {Router}\n","function BackupStorage() {}\n\nBackupStorage.prototype = {\n    getItem: function (key) {\n        return this[key];\n    },\n    setItem: function (key, value) {\n        this[key] = value;\n    },\n    removeItem: function (key) {\n        delete this[key];\n    },\n    clear: function () {\n        for (let key in this) {\n            if (this.hasOwnProperty(key)) {\n                delete this[key];\n            }\n        }\n    }\n};\n\nconst backupStorage = new BackupStorage()\n\nconst StorageProvider = ('localStorage' in window && window['localStorage']) ? window['localStorage'] : backupStorage;\n\nexport {\n    StorageProvider\n}","import { StorageProvider } from './storage'\n\nexport const StorageCache = {\n    storageProvider: StorageProvider,\n    set: function (key, data, ttl) {\n        ttl = new Date().getTime() + ttl * 1000 * 60\n        try {\n            StorageProvider.setItem(['cache', key, 'ttl'].join(':'), ttl)\n            StorageProvider.setItem(\n                ['cache', key].join(':'),\n                JSON.stringify(data)\n            )\n        } catch (e) {\n            StorageProvider.clear()\n        }\n        return this\n    },\n    expire: function (key) {\n        StorageProvider.removeItem(['cache', key, 'ttl'].join(':'))\n        StorageProvider.removeItem(['cache', key].join(':'))\n        return this\n    },\n    exist: function (key) {\n        let ttl = Storage.getItem(['cache', key, 'ttl'].join(':'))\n        return !!(ttl && ttl > new Date().getTime())\n    },\n    get: function (key) {\n        return JSON.parse(Storage.getItem(['cache', key].join(':')))\n    },\n    list: function () {\n        let key,\n            list = []\n        for (key in StorageProvider) {\n            if (StorageProvider.hasOwnProperty(key)) {\n                if (\n                    key.indexOf('cache:') !== -1 &&\n                    key.indexOf(':ttl') === -1\n                ) {\n                    list.push(key.slice(6))\n                }\n            }\n        }\n        return list\n    },\n    clear: function (force) {\n        this.list().forEach(\n            function (key) {\n                ;(force === true || this.exist(key) === false) &&\n                    this.expire(key)\n            }.bind(this)\n        )\n    },\n}\n","import $ from './core/jquery'\nimport { pathToRegexp, pathMatch } from './core/utils'\nimport { Class, createClass, getClass } from './core/class'\nimport { getFormData, setFormData } from './core/form'\nimport { UrlLocation } from './core/location'\nimport { createModel, getModel, Model } from './core/model'\nimport { deparam } from './core/deparam'\nimport { Router } from './core/router'\nimport { view } from './core/view'\nimport { StorageCache } from './utils/cache'\nimport {\n    cleanControls,\n    Control,\n    createControl,\n    initControl,\n    initControls,\n} from './core/control'\n\n$.fn.setFormData = setFormData\n$.fn.getFormData = getFormData\n$.fn.initControls = function () {\n    this.each(function (index, element) {\n        initControls(element)\n    })\n}\n\nexport {\n    $,\n    deparam,\n    view,\n    Class,\n    UrlLocation,\n    Model,\n    Control,\n    Router,\n    StorageCache,\n    pathToRegexp,\n    pathMatch,\n    createClass,\n    getModel,\n    getClass,\n    cleanControls,\n    createControl,\n    createModel,\n    initControl,\n}\n"],"names":["jQuery","window","isArray","value","Array","isFunction","isPlainObject","toString","call","proto","Object","getPrototypeOf","func","hasOwnProperty","constructor","forEach","object","callback","thisArg","prop","context","arrayStringify","a","JSON","stringify","slice","sort","pathToRegexp","path","result","keys","concat","replace","_","slash","format","key","capture","opt","push","name","optional","RegExp","pathMatch","regexp","match","exec","params","i","len","length","decodeURIComponent","classRegistry","initState","newInstance","parent","extend","Constructor","apply","Function","bind","newConstructor","instance","o","p","setPrototypeOf","__proto__","prototype","superMethod","method","temp","this","_super","arguments","Class","createClass","getClass","data","deparam","coerce","spaces","obj","coerce_types","true","false","null","split","v","val","param","cur","keys_last","test","shift","isNaN","undefined","proxy","fn","cx","cb","init","target","indexOf","assign","breaker","clean","splice","skip","UrlLocation","prefix","type","event","callbacks","initialize","url","location","normalize","join","silent","href","part","index","query","$","json","chunk","parse","e","changeHandler","change","addEventListener","unbind","host","str","modelRegistry","Model","$data","alt","defaults","attr","ns","child","on","add","off","remove","trigger","$update","$change","defer","Deferred","resolve","tmp","pop","eachItem","args","reduce","each","attrs","props","serialize","createModel","getModel","controlRegistry","controls","ATTR","ATTR_SELECTOR","Control","addControlClassName","document","_addProxy_","f","s","_event_","toArray","element","pushInstance","initElement","create","addClass","arr","initBindings","_bindings_","addBinding","_proxy_cache_","find","el","tag","className","createElement","clearProxyCache","filter","item","a2","unbindAll","timeout","time","_idle_timeout_","clearTimeout","setTimeout","destroy","removeClass","removeData","canBeDestroyed","contains","get","sortControls","b","c","querySelectorAll","d","cleanControls","force","control","initControl","initControls","getAttribute","removeAttribute","listPreload","listView","listAttr","listProp","listCache","settings","noMatch","escapes","escaper","htmlEntities","entityRe","stringFormat","uid","size","String","random","Math","abs","Date","getTime","parseFloat","toFixed","escapeExpr","string","compile","text","render","matcher","source","escape","interpolate","evaluate","offset","console","error","template","output","resolver","renderHTML","html","innerHTML","importNode","content","frag","createDocumentFragment","div","firstChild","appendChild","fragment","id","node","getElementById","parentNode","replaceChild","mountNodes","querySelector","selector","mountProps","helpers","defaultExtList","resolverExp","list","ext","exp","set","l","n","$include","view","$each","$view","$prop","$control","preload","then","helper","listener","hashchange","run","response","reset","has","empty","complete","stop","notify","promise","queue","wrapper","model","getChildPath","regex","getCallbacks","Router","_before_","_after_","_routes_","request","prepare","route","use","before","after","next","process","start","listen","that","BackupStorage","getItem","setItem","removeItem","clear","backupStorage","StorageProvider","StorageCache","storageProvider","ttl","expire","exist","Storage","setFormData","current","parts","is","getFormData","serializeArray","map","field","encodeURIComponent","info"],"mappings":"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"}